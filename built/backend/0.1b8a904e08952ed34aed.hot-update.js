exports.id = 0;
exports.modules = {

/***/ "./src/backend/models/plugins/authorPlugin.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("Object.defineProperty(exports, \"__esModule\", { value: true });var _extends = Object.assign || function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i[\"return\"]) _i[\"return\"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}};}();var _mongoose = __webpack_require__(\"mongoose\");var _mongoose2 = _interopRequireDefault(_mongoose);\nvar _error = __webpack_require__(\"./src/backend/common/error.js\");function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function _toConsumableArray(arr) {if (Array.isArray(arr)) {for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {arr2[i] = arr[i];}return arr2;} else {return Array.from(arr);}}var\n\nSchema = _mongoose2.default.Schema;var\nObjectId = Schema.Types.ObjectId;\n\nvar merge = function merge() {for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {args[_key] = arguments[_key];}\n  var permissions = {};var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {\n    for (var _iterator = args[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var arg = _step.value;\n      var keys = Object.keys(arg || {});var _iteratorNormalCompletion2 = true;var _didIteratorError2 = false;var _iteratorError2 = undefined;try {\n        for (var _iterator2 = keys[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {var key = _step2.value;\n          if (permissions[key] === true) continue;\n          if (arg[key] === true) permissions[key] = true;else\n          {var _permissions$key;\n            if (!permissions[key]) permissions[key] = [];\n            (_permissions$key = permissions[key]).push.apply(_permissions$key, _toConsumableArray(arg[key]));\n          }\n        }} catch (err) {_didIteratorError2 = true;_iteratorError2 = err;} finally {try {if (!_iteratorNormalCompletion2 && _iterator2.return) {_iterator2.return();}} finally {if (_didIteratorError2) {throw _iteratorError2;}}}\n    }} catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}\n  return permissions;\n};\n\nvar getMatch = function getMatch() {var permissions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return [\n  [permissions.none, function (author) {return false;}],\n  [permissions.user, function (author) {return author.isUser();}],\n  [permissions.owner, function (author, doc) {return author.isOwner(doc);}],\n  [permissions.self, function (author, doc) {return author.isSelf(doc);}],\n  [permissions.guest, function (author) {return true;}]];\n\n};\n\nvar check = function check(match, author, doc, process) {var _iteratorNormalCompletion3 = true;var _didIteratorError3 = false;var _iteratorError3 = undefined;try {\n    for (var _iterator3 = match[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {var _step3$value = _slicedToArray(_step3.value, 2),fields = _step3$value[0],func = _step3$value[1];\n      if (fields === undefined) continue;\n      var permitted = func(author, doc);\n      if (!permitted) {\n        if (fields === true) throw new _error.PermissionError();\n        if (process) {\n          fields.forEach(process);\n        }\n      }\n    }} catch (err) {_didIteratorError3 = true;_iteratorError3 = err;} finally {try {if (!_iteratorNormalCompletion3 && _iterator3.return) {_iterator3.return();}} finally {if (_didIteratorError3) {throw _iteratorError3;}}}\n};\n\nvar processSet = function processSet(schema, options) {\n  var insertMatch = getMatch(merge(options.set, options.insert));\n  var modifyMatch = getMatch(merge(options.set, options.modify));\n  schema.pre('save', function (next) {\n    var doc = this;\n    if (doc._author === true) return next();\n    if (options.authorField) {\n      if (doc.isModified('author')) return next(new _error.PermissionError());\n      doc.author = doc._author;\n    }\n    try {\n      check(doc.isNew ? insertMatch : modifyMatch, doc._author, doc, function (field) {\n        if (doc.isModified(field)) throw new _error.PermissionError();\n      });\n      next();\n    } catch (err) {\n      next(err);\n    }\n  });\n};\n\nvar processGet = function processGet(schema, options) {\n  var match = getMatch(options.get);\n  var _toJSON = schema.options.toJSON;\n  schema.options.toJSON = {\n    transform: function transform(doc, ret, options) {\n      if (_toJSON && _toJSON.transform) {\n        ret = _toJSON.transform(doc, ret, options);\n      }\n      check(match, options.req.author, doc, function (field) {\n        delete ret[field];\n      });\n      return ret;\n    } };\n\n};\n\nvar processRemove = function processRemove(schema, options) {\n  var match = getMatch(options.remove);\n  schema.pre('remove', function (next) {\n    var doc = this;\n    if (doc._author === true) return next();\n    if (options.authorField) {\n      if (doc.isModified('author')) return next(new _error.PermissionError());\n      doc.author = doc._author;\n    }\n    try {\n      check(match, doc.author, doc);\n      next();\n    } catch (err) {\n      next(err);\n    }\n  });\n};\n\nvar authorPlugin = function authorPlugin(schema, options) {\n  options = _extends({\n    authorField: false,\n    set: {},\n    insert: {},\n    modify: {},\n    get: {},\n    remove: {} },\n  options);\n\n\n  schema.methods.setAuthor = function (author) {\n    this._author = author;\n    return this;\n  };\n\n  schema.methods.force = function () {\n    this._author = true;\n    return this;\n  };\n\n  processSet(schema, options);\n  processGet(schema, options);\n  processRemove(schema, options);\n};exports.default =\n\nauthorPlugin;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYmFja2VuZC9tb2RlbHMvcGx1Z2lucy9hdXRob3JQbHVnaW4uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYmFja2VuZC9tb2RlbHMvcGx1Z2lucy9hdXRob3JQbHVnaW4uanM/MjUzYSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO3ZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge2ZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7dmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7aWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHt0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO319fXJldHVybiB0YXJnZXQ7fTt2YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7ZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHt2YXIgX2FyciA9IFtdO3ZhciBfbiA9IHRydWU7dmFyIF9kID0gZmFsc2U7dmFyIF9lID0gdW5kZWZpbmVkO3RyeSB7Zm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkge19hcnIucHVzaChfcy52YWx1ZSk7aWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO319IGNhdGNoIChlcnIpIHtfZCA9IHRydWU7X2UgPSBlcnI7fSBmaW5hbGx5IHt0cnkge2lmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7fSBmaW5hbGx5IHtpZiAoX2QpIHRocm93IF9lO319cmV0dXJuIF9hcnI7fXJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7aWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge3JldHVybiBhcnI7fSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHtyZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpO30gZWxzZSB7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7fX07fSgpO3ZhciBfbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO3ZhciBfbW9uZ29vc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbW9uZ29vc2UpO1xudmFyIF9lcnJvciA9IHJlcXVpcmUoJy9jb21tb24vZXJyb3InKTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge3JldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O31mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7aWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge2ZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHthcnIyW2ldID0gYXJyW2ldO31yZXR1cm4gYXJyMjt9IGVsc2Uge3JldHVybiBBcnJheS5mcm9tKGFycik7fX12YXJcblxuU2NoZW1hID0gX21vbmdvb3NlMi5kZWZhdWx0LlNjaGVtYTt2YXJcbk9iamVjdElkID0gU2NoZW1hLlR5cGVzLk9iamVjdElkO1xuXG52YXIgbWVyZ2UgPSBmdW5jdGlvbiBtZXJnZSgpIHtmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge2FyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07fVxuICB2YXIgcGVybWlzc2lvbnMgPSB7fTt2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7dmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7dmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO3RyeSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gYXJnc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHt2YXIgYXJnID0gX3N0ZXAudmFsdWU7XG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFyZyB8fCB7fSk7dmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTt2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7dmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDt0cnkge1xuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0ga2V5c1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMjsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IChfc3RlcDIgPSBfaXRlcmF0b3IyLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZSkge3ZhciBrZXkgPSBfc3RlcDIudmFsdWU7XG4gICAgICAgICAgaWYgKHBlcm1pc3Npb25zW2tleV0gPT09IHRydWUpIGNvbnRpbnVlO1xuICAgICAgICAgIGlmIChhcmdba2V5XSA9PT0gdHJ1ZSkgcGVybWlzc2lvbnNba2V5XSA9IHRydWU7ZWxzZVxuICAgICAgICAgIHt2YXIgX3Blcm1pc3Npb25zJGtleTtcbiAgICAgICAgICAgIGlmICghcGVybWlzc2lvbnNba2V5XSkgcGVybWlzc2lvbnNba2V5XSA9IFtdO1xuICAgICAgICAgICAgKF9wZXJtaXNzaW9ucyRrZXkgPSBwZXJtaXNzaW9uc1trZXldKS5wdXNoLmFwcGx5KF9wZXJtaXNzaW9ucyRrZXksIF90b0NvbnN1bWFibGVBcnJheShhcmdba2V5XSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfX0gY2F0Y2ggKGVycikge19kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7X2l0ZXJhdG9yRXJyb3IyID0gZXJyO30gZmluYWxseSB7dHJ5IHtpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yICYmIF9pdGVyYXRvcjIucmV0dXJuKSB7X2l0ZXJhdG9yMi5yZXR1cm4oKTt9fSBmaW5hbGx5IHtpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7dGhyb3cgX2l0ZXJhdG9yRXJyb3IyO319fVxuICAgIH19IGNhdGNoIChlcnIpIHtfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7X2l0ZXJhdG9yRXJyb3IgPSBlcnI7fSBmaW5hbGx5IHt0cnkge2lmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7X2l0ZXJhdG9yLnJldHVybigpO319IGZpbmFsbHkge2lmIChfZGlkSXRlcmF0b3JFcnJvcikge3Rocm93IF9pdGVyYXRvckVycm9yO319fVxuICByZXR1cm4gcGVybWlzc2lvbnM7XG59O1xuXG52YXIgZ2V0TWF0Y2ggPSBmdW5jdGlvbiBnZXRNYXRjaCgpIHt2YXIgcGVybWlzc2lvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICByZXR1cm4gW1xuICBbcGVybWlzc2lvbnMubm9uZSwgZnVuY3Rpb24gKGF1dGhvcikge3JldHVybiBmYWxzZTt9XSxcbiAgW3Blcm1pc3Npb25zLnVzZXIsIGZ1bmN0aW9uIChhdXRob3IpIHtyZXR1cm4gYXV0aG9yLmlzVXNlcigpO31dLFxuICBbcGVybWlzc2lvbnMub3duZXIsIGZ1bmN0aW9uIChhdXRob3IsIGRvYykge3JldHVybiBhdXRob3IuaXNPd25lcihkb2MpO31dLFxuICBbcGVybWlzc2lvbnMuc2VsZiwgZnVuY3Rpb24gKGF1dGhvciwgZG9jKSB7cmV0dXJuIGF1dGhvci5pc1NlbGYoZG9jKTt9XSxcbiAgW3Blcm1pc3Npb25zLmd1ZXN0LCBmdW5jdGlvbiAoYXV0aG9yKSB7cmV0dXJuIHRydWU7fV1dO1xuXG59O1xuXG52YXIgY2hlY2sgPSBmdW5jdGlvbiBjaGVjayhtYXRjaCwgYXV0aG9yLCBkb2MsIHByb2Nlc3MpIHt2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlO3ZhciBfZGlkSXRlcmF0b3JFcnJvcjMgPSBmYWxzZTt2YXIgX2l0ZXJhdG9yRXJyb3IzID0gdW5kZWZpbmVkO3RyeSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IG1hdGNoW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAzOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gKF9zdGVwMyA9IF9pdGVyYXRvcjMubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlKSB7dmFyIF9zdGVwMyR2YWx1ZSA9IF9zbGljZWRUb0FycmF5KF9zdGVwMy52YWx1ZSwgMiksZmllbGRzID0gX3N0ZXAzJHZhbHVlWzBdLGZ1bmMgPSBfc3RlcDMkdmFsdWVbMV07XG4gICAgICBpZiAoZmllbGRzID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xuICAgICAgdmFyIHBlcm1pdHRlZCA9IGZ1bmMoYXV0aG9yLCBkb2MpO1xuICAgICAgaWYgKCFwZXJtaXR0ZWQpIHtcbiAgICAgICAgaWYgKGZpZWxkcyA9PT0gdHJ1ZSkgdGhyb3cgbmV3IF9lcnJvci5QZXJtaXNzaW9uRXJyb3IoKTtcbiAgICAgICAgaWYgKHByb2Nlc3MpIHtcbiAgICAgICAgICBmaWVsZHMuZm9yRWFjaChwcm9jZXNzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH19IGNhdGNoIChlcnIpIHtfZGlkSXRlcmF0b3JFcnJvcjMgPSB0cnVlO19pdGVyYXRvckVycm9yMyA9IGVycjt9IGZpbmFsbHkge3RyeSB7aWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyAmJiBfaXRlcmF0b3IzLnJldHVybikge19pdGVyYXRvcjMucmV0dXJuKCk7fX0gZmluYWxseSB7aWYgKF9kaWRJdGVyYXRvckVycm9yMykge3Rocm93IF9pdGVyYXRvckVycm9yMzt9fX1cbn07XG5cbnZhciBwcm9jZXNzU2V0ID0gZnVuY3Rpb24gcHJvY2Vzc1NldChzY2hlbWEsIG9wdGlvbnMpIHtcbiAgdmFyIGluc2VydE1hdGNoID0gZ2V0TWF0Y2gobWVyZ2Uob3B0aW9ucy5zZXQsIG9wdGlvbnMuaW5zZXJ0KSk7XG4gIHZhciBtb2RpZnlNYXRjaCA9IGdldE1hdGNoKG1lcmdlKG9wdGlvbnMuc2V0LCBvcHRpb25zLm1vZGlmeSkpO1xuICBzY2hlbWEucHJlKCdzYXZlJywgZnVuY3Rpb24gKG5leHQpIHtcbiAgICB2YXIgZG9jID0gdGhpcztcbiAgICBpZiAoZG9jLl9hdXRob3IgPT09IHRydWUpIHJldHVybiBuZXh0KCk7XG4gICAgaWYgKG9wdGlvbnMuYXV0aG9yRmllbGQpIHtcbiAgICAgIGlmIChkb2MuaXNNb2RpZmllZCgnYXV0aG9yJykpIHJldHVybiBuZXh0KG5ldyBfZXJyb3IuUGVybWlzc2lvbkVycm9yKCkpO1xuICAgICAgZG9jLmF1dGhvciA9IGRvYy5fYXV0aG9yO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY2hlY2soZG9jLmlzTmV3ID8gaW5zZXJ0TWF0Y2ggOiBtb2RpZnlNYXRjaCwgZG9jLl9hdXRob3IsIGRvYywgZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgIGlmIChkb2MuaXNNb2RpZmllZChmaWVsZCkpIHRocm93IG5ldyBfZXJyb3IuUGVybWlzc2lvbkVycm9yKCk7XG4gICAgICB9KTtcbiAgICAgIG5leHQoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIG5leHQoZXJyKTtcbiAgICB9XG4gIH0pO1xufTtcblxudmFyIHByb2Nlc3NHZXQgPSBmdW5jdGlvbiBwcm9jZXNzR2V0KHNjaGVtYSwgb3B0aW9ucykge1xuICB2YXIgbWF0Y2ggPSBnZXRNYXRjaChvcHRpb25zLmdldCk7XG4gIHZhciBfdG9KU09OID0gc2NoZW1hLm9wdGlvbnMudG9KU09OO1xuICBzY2hlbWEub3B0aW9ucy50b0pTT04gPSB7XG4gICAgdHJhbnNmb3JtOiBmdW5jdGlvbiB0cmFuc2Zvcm0oZG9jLCByZXQsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChfdG9KU09OICYmIF90b0pTT04udHJhbnNmb3JtKSB7XG4gICAgICAgIHJldCA9IF90b0pTT04udHJhbnNmb3JtKGRvYywgcmV0LCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGNoZWNrKG1hdGNoLCBvcHRpb25zLnJlcS5hdXRob3IsIGRvYywgZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgIGRlbGV0ZSByZXRbZmllbGRdO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH0gfTtcblxufTtcblxudmFyIHByb2Nlc3NSZW1vdmUgPSBmdW5jdGlvbiBwcm9jZXNzUmVtb3ZlKHNjaGVtYSwgb3B0aW9ucykge1xuICB2YXIgbWF0Y2ggPSBnZXRNYXRjaChvcHRpb25zLnJlbW92ZSk7XG4gIHNjaGVtYS5wcmUoJ3JlbW92ZScsIGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgdmFyIGRvYyA9IHRoaXM7XG4gICAgaWYgKGRvYy5fYXV0aG9yID09PSB0cnVlKSByZXR1cm4gbmV4dCgpO1xuICAgIGlmIChvcHRpb25zLmF1dGhvckZpZWxkKSB7XG4gICAgICBpZiAoZG9jLmlzTW9kaWZpZWQoJ2F1dGhvcicpKSByZXR1cm4gbmV4dChuZXcgX2Vycm9yLlBlcm1pc3Npb25FcnJvcigpKTtcbiAgICAgIGRvYy5hdXRob3IgPSBkb2MuX2F1dGhvcjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNoZWNrKG1hdGNoLCBkb2MuYXV0aG9yLCBkb2MpO1xuICAgICAgbmV4dCgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgbmV4dChlcnIpO1xuICAgIH1cbiAgfSk7XG59O1xuXG52YXIgYXV0aG9yUGx1Z2luID0gZnVuY3Rpb24gYXV0aG9yUGx1Z2luKHNjaGVtYSwgb3B0aW9ucykge1xuICBvcHRpb25zID0gX2V4dGVuZHMoe1xuICAgIGF1dGhvckZpZWxkOiBmYWxzZSxcbiAgICBzZXQ6IHt9LFxuICAgIGluc2VydDoge30sXG4gICAgbW9kaWZ5OiB7fSxcbiAgICBnZXQ6IHt9LFxuICAgIHJlbW92ZToge30gfSxcbiAgb3B0aW9ucyk7XG5cblxuICBzY2hlbWEubWV0aG9kcy5zZXRBdXRob3IgPSBmdW5jdGlvbiAoYXV0aG9yKSB7XG4gICAgdGhpcy5fYXV0aG9yID0gYXV0aG9yO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHNjaGVtYS5tZXRob2RzLmZvcmNlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2F1dGhvciA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcHJvY2Vzc1NldChzY2hlbWEsIG9wdGlvbnMpO1xuICBwcm9jZXNzR2V0KHNjaGVtYSwgb3B0aW9ucyk7XG4gIHByb2Nlc3NSZW1vdmUoc2NoZW1hLCBvcHRpb25zKTtcbn07ZXhwb3J0cy5kZWZhdWx0ID1cblxuYXV0aG9yUGx1Z2luO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2JhY2tlbmQvbW9kZWxzL3BsdWdpbnMvYXV0aG9yUGx1Z2luLmpzXG4vLyBtb2R1bGUgaWQgPSAuL3NyYy9iYWNrZW5kL21vZGVscy9wbHVnaW5zL2F1dGhvclBsdWdpbi5qc1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/backend/models/plugins/authorPlugin.js\n");

/***/ })

};