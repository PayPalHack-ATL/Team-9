exports.id = 0;
exports.modules = {

/***/ "./src/backend/common/util.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("Object.defineProperty(exports, \"__esModule\", { value: true });exports.deleteFile = exports.isImageFile = exports.now = exports.isMongooseObject = exports.replaceMe = undefined;var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i[\"return\"]) _i[\"return\"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}};}();var _error = __webpack_require__(\"./src/backend/common/error.js\");\n\nvar replaceMe = function replaceMe(req, res, next) {\n  if (req.params.object_id === 'me') {var\n    author = req.author;\n    if (!author.isUser()) return next(new _error.AuthorizationError());\n    req.params.object_id = author._id;\n  }\n  next();\n};\n\nvar isMongooseObject = function isMongooseObject(object) {return object && object.constructor.name === 'model';};\n\nvar now = function now() {\n  return new Date();\n};\n\nvar isImageFile = function isImageFile(value) {var _value$split =\n  value.split('/'),_value$split2 = _slicedToArray(_value$split, 2),type = _value$split2[0],subtype = _value$split2[1];\n  return type === 'image' && ['gif', 'jpeg', 'png', 'svg+xml'].includes(subtype);\n};\n\nvar deleteFile = function deleteFile(path) {\n  return new Promise(function (resolve, reject) {\n    fs.access(path, function (err) {\n      if (err) return reject(err);\n      fs.unlink(path, function (err) {\n        if (err) return reject(err);\n        resolve();\n      });\n    });\n  });\n};exports.\n\n\nreplaceMe = replaceMe;exports.\nisMongooseObject = isMongooseObject;exports.\nnow = now;exports.\nisImageFile = isImageFile;exports.\ndeleteFile = deleteFile;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYmFja2VuZC9jb21tb24vdXRpbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9iYWNrZW5kL2NvbW1vbi91dGlsLmpzPzY5YTMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtleHBvcnRzLmRlbGV0ZUZpbGUgPSBleHBvcnRzLmlzSW1hZ2VGaWxlID0gZXhwb3J0cy5ub3cgPSBleHBvcnRzLmlzTW9uZ29vc2VPYmplY3QgPSBleHBvcnRzLnJlcGxhY2VNZSA9IHVuZGVmaW5lZDt2YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7ZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHt2YXIgX2FyciA9IFtdO3ZhciBfbiA9IHRydWU7dmFyIF9kID0gZmFsc2U7dmFyIF9lID0gdW5kZWZpbmVkO3RyeSB7Zm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkge19hcnIucHVzaChfcy52YWx1ZSk7aWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO319IGNhdGNoIChlcnIpIHtfZCA9IHRydWU7X2UgPSBlcnI7fSBmaW5hbGx5IHt0cnkge2lmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7fSBmaW5hbGx5IHtpZiAoX2QpIHRocm93IF9lO319cmV0dXJuIF9hcnI7fXJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7aWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge3JldHVybiBhcnI7fSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHtyZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpO30gZWxzZSB7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7fX07fSgpO3ZhciBfZXJyb3IgPSByZXF1aXJlKCcuL2Vycm9yJyk7XG5cbnZhciByZXBsYWNlTWUgPSBmdW5jdGlvbiByZXBsYWNlTWUocmVxLCByZXMsIG5leHQpIHtcbiAgaWYgKHJlcS5wYXJhbXMub2JqZWN0X2lkID09PSAnbWUnKSB7dmFyXG4gICAgYXV0aG9yID0gcmVxLmF1dGhvcjtcbiAgICBpZiAoIWF1dGhvci5pc1VzZXIoKSkgcmV0dXJuIG5leHQobmV3IF9lcnJvci5BdXRob3JpemF0aW9uRXJyb3IoKSk7XG4gICAgcmVxLnBhcmFtcy5vYmplY3RfaWQgPSBhdXRob3IuX2lkO1xuICB9XG4gIG5leHQoKTtcbn07XG5cbnZhciBpc01vbmdvb3NlT2JqZWN0ID0gZnVuY3Rpb24gaXNNb25nb29zZU9iamVjdChvYmplY3QpIHtyZXR1cm4gb2JqZWN0ICYmIG9iamVjdC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnbW9kZWwnO307XG5cbnZhciBub3cgPSBmdW5jdGlvbiBub3coKSB7XG4gIHJldHVybiBuZXcgRGF0ZSgpO1xufTtcblxudmFyIGlzSW1hZ2VGaWxlID0gZnVuY3Rpb24gaXNJbWFnZUZpbGUodmFsdWUpIHt2YXIgX3ZhbHVlJHNwbGl0ID1cbiAgdmFsdWUuc3BsaXQoJy8nKSxfdmFsdWUkc3BsaXQyID0gX3NsaWNlZFRvQXJyYXkoX3ZhbHVlJHNwbGl0LCAyKSx0eXBlID0gX3ZhbHVlJHNwbGl0MlswXSxzdWJ0eXBlID0gX3ZhbHVlJHNwbGl0MlsxXTtcbiAgcmV0dXJuIHR5cGUgPT09ICdpbWFnZScgJiYgWydnaWYnLCAnanBlZycsICdwbmcnLCAnc3ZnK3htbCddLmluY2x1ZGVzKHN1YnR5cGUpO1xufTtcblxudmFyIGRlbGV0ZUZpbGUgPSBmdW5jdGlvbiBkZWxldGVGaWxlKHBhdGgpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmcy5hY2Nlc3MocGF0aCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgZnMudW5saW5rKHBhdGgsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59O2V4cG9ydHMuXG5cblxucmVwbGFjZU1lID0gcmVwbGFjZU1lO2V4cG9ydHMuXG5pc01vbmdvb3NlT2JqZWN0ID0gaXNNb25nb29zZU9iamVjdDtleHBvcnRzLlxubm93ID0gbm93O2V4cG9ydHMuXG5pc0ltYWdlRmlsZSA9IGlzSW1hZ2VGaWxlO2V4cG9ydHMuXG5kZWxldGVGaWxlID0gZGVsZXRlRmlsZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9iYWNrZW5kL2NvbW1vbi91dGlsLmpzXG4vLyBtb2R1bGUgaWQgPSAuL3NyYy9iYWNrZW5kL2NvbW1vbi91dGlsLmpzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/backend/common/util.js\n");

/***/ })

};