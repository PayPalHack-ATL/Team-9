exports.id = 0;
exports.modules = {

/***/ "./src/backend/controllers/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("Object.defineProperty(exports, \"__esModule\", { value: true });var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i[\"return\"]) _i[\"return\"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}};}();var _express = __webpack_require__(\"express\");var _express2 = _interopRequireDefault(_express);\nvar _models = __webpack_require__(\"./src/backend/models/index.js\");\nvar _util = __webpack_require__(\"./src/backend/common/util.js\");\nvar _error = __webpack_require__(\"./src/backend/common/error.js\");\nvar _CodeHighRouter = __webpack_require__(\"./src/backend/controllers/CodeHighRouter.js\");var _CodeHighRouter2 = _interopRequireDefault(_CodeHighRouter);\nvar _auth = __webpack_require__(\"./src/backend/controllers/auth.js\");var _auth2 = _interopRequireDefault(_auth);\nvar _solution = __webpack_require__(\"./src/backend/controllers/solution.js\");var _solution2 = _interopRequireDefault(_solution);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function _objectWithoutProperties(obj, keys) {var target = {};for (var i in obj) {if (keys.indexOf(i) >= 0) continue;if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;target[i] = obj[i];}return target;}\n\nvar router = new _express2.default.Router();\n\nvar processWhere = function processWhere(Model, where) {\n  var definition = Model.schema.obj;\n  var query = {};\n  var keys = Object.keys(where);var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {\n    for (var _iterator = keys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var key = _step.value;\n      if (!definition[key]) continue;\n      var property = definition[key];\n      var value = where[key];\n      switch (property.type) {\n        case String:\n          if (property.enum) {\n            query[key] = value;\n          } else {\n            query[key] = new RegExp(value, 'i');\n          }\n          break;\n        default:\n          query[key] = value;}\n\n    }} catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}\n  return query;\n};\n\nvar processPopulate = function processPopulate(populate) {\n  var fields = populate ? populate.split(',') : [];\n  return fields.map(function (field) {\n    var query = {};\n    var cursor = query;\n    var tokens = field.split('.');var _iteratorNormalCompletion2 = true;var _didIteratorError2 = false;var _iteratorError2 = undefined;try {\n      for (var _iterator2 = tokens[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {var token = _step2.value;\n        cursor = cursor.populate = { path: token };\n      }} catch (err) {_didIteratorError2 = true;_iteratorError2 = err;} finally {try {if (!_iteratorNormalCompletion2 && _iterator2.return) {_iterator2.return();}} finally {if (_didIteratorError2) {throw _iteratorError2;}}}\n    return query.populate;\n  });\n};\n\nvar getRequestOptions = function getRequestOptions(req) {var _req$query =\n\n\n\n\n\n\n  req.query,_req$query$sort = _req$query.sort,sort = _req$query$sort === undefined ? null : _req$query$sort,_req$query$skip = _req$query.skip,skip = _req$query$skip === undefined ? null : _req$query$skip,_req$query$limit = _req$query.limit,limit = _req$query$limit === undefined ? null : _req$query$limit,_req$query$populate = _req$query.populate,populate = _req$query$populate === undefined ? null : _req$query$populate,_where = _objectWithoutProperties(_req$query, ['sort', 'skip', 'limit', 'populate']);\n  return {\n    sort: sort,\n    skip: skip,\n    limit: limit,\n    populate: processPopulate(populate),\n    where: function where(Object) {return processWhere(Object, _where);} };\n\n};\n\nrouter.use(function (req, res, next) {\n  req.options = getRequestOptions(req);\n\n  res.return = function (obj) {\n    var flat = {};\n    var keys = Object.keys(obj);var _iteratorNormalCompletion3 = true;var _didIteratorError3 = false;var _iteratorError3 = undefined;try {\n      for (var _iterator3 = keys[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {var key = _step3.value;\n        var value = obj[key];\n        if ((0, _util.isMongooseObject)(value)) {\n          flat[key] = value.toJSON({ req: req });\n        } else if (Array.isArray(value) && (0, _util.isMongooseObject)(value[0])) {\n          flat[key] = value.map(function (elem) {return elem.toJSON({ req: req });});\n        } else {\n          flat[key] = value;\n        }\n      }} catch (err) {_didIteratorError3 = true;_iteratorError3 = err;} finally {try {if (!_iteratorNormalCompletion3 && _iterator3.return) {_iterator3.return();}} finally {if (_didIteratorError3) {throw _iteratorError3;}}}\n    res.json(flat);\n  };var\n\n  token = req.cookies.token;\n  if (token) {\n    _models.Auth.verify(token).\n    catch(function () {\n      res.cookie('token', '');\n      throw new _error.AuthorizationError();\n    }).\n    then(function (auth) {return _models.Auth.populate(auth, 'user');}).\n    then(function (auth) {return auth.refresh();}).\n    then(function (auth) {\n      req.author = auth.user;\n      next();\n    }).\n    catch(next);\n  } else {\n    req.author = new _models.User();\n    next();\n  }\n});\nrouter.use('/auth', _auth2.default);\nrouter.use('/rating', (0, _CodeHighRouter2.default)(_models.Rating, 'rating', 'ratings'));\nrouter.use('/solution', _solution2.default);\nrouter.use('/topic', (0, _CodeHighRouter2.default)(_models.Topic, 'topic', 'topics'));\nrouter.use('/user', (0, _CodeHighRouter2.default)(_models.User, 'user', 'users', _util.replaceMe));\nrouter.use(function (req, res, next) {return next(new _error.NotFoundError());});\nrouter.use(function (err, req, res, next) {\n  var statusMap = [\n  [_error.AuthorizationError, 401],\n  [_error.PermissionError, 403],\n  [_error.NotFoundError, 404],\n  [Error, 500]];var _statusMap$find =\n\n  statusMap.find(function (_ref) {var _ref2 = _slicedToArray(_ref, 1),Error = _ref2[0];return err instanceof Error;}),_statusMap$find2 = _slicedToArray(_statusMap$find, 2),status = _statusMap$find2[1];\n  res.status(status);\n  res.json({\n    status: status,\n    err: err });\n\n  console.error(err);\n});exports.default =\n\nrouter;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYmFja2VuZC9jb250cm9sbGVycy9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9iYWNrZW5kL2NvbnRyb2xsZXJzL2luZGV4LmpzPzVmYTciXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTt2YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7ZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHt2YXIgX2FyciA9IFtdO3ZhciBfbiA9IHRydWU7dmFyIF9kID0gZmFsc2U7dmFyIF9lID0gdW5kZWZpbmVkO3RyeSB7Zm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkge19hcnIucHVzaChfcy52YWx1ZSk7aWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO319IGNhdGNoIChlcnIpIHtfZCA9IHRydWU7X2UgPSBlcnI7fSBmaW5hbGx5IHt0cnkge2lmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7fSBmaW5hbGx5IHtpZiAoX2QpIHRocm93IF9lO319cmV0dXJuIF9hcnI7fXJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7aWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge3JldHVybiBhcnI7fSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHtyZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpO30gZWxzZSB7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7fX07fSgpO3ZhciBfZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTt2YXIgX2V4cHJlc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhwcmVzcyk7XG52YXIgX21vZGVscyA9IHJlcXVpcmUoJy9tb2RlbHMnKTtcbnZhciBfdXRpbCA9IHJlcXVpcmUoJy9jb21tb24vdXRpbCcpO1xudmFyIF9lcnJvciA9IHJlcXVpcmUoJy9jb21tb24vZXJyb3InKTtcbnZhciBfQ29kZUhpZ2hSb3V0ZXIgPSByZXF1aXJlKCcuL0NvZGVIaWdoUm91dGVyJyk7dmFyIF9Db2RlSGlnaFJvdXRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db2RlSGlnaFJvdXRlcik7XG52YXIgX2F1dGggPSByZXF1aXJlKCcuL2F1dGgnKTt2YXIgX2F1dGgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXV0aCk7XG52YXIgX3NvbHV0aW9uID0gcmVxdWlyZSgnLi9zb2x1dGlvbicpO3ZhciBfc29sdXRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc29sdXRpb24pO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7cmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07fWZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvYmosIGtleXMpIHt2YXIgdGFyZ2V0ID0ge307Zm9yICh2YXIgaSBpbiBvYmopIHtpZiAoa2V5cy5pbmRleE9mKGkpID49IDApIGNvbnRpbnVlO2lmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlO3RhcmdldFtpXSA9IG9ialtpXTt9cmV0dXJuIHRhcmdldDt9XG5cbnZhciByb3V0ZXIgPSBuZXcgX2V4cHJlc3MyLmRlZmF1bHQuUm91dGVyKCk7XG5cbnZhciBwcm9jZXNzV2hlcmUgPSBmdW5jdGlvbiBwcm9jZXNzV2hlcmUoTW9kZWwsIHdoZXJlKSB7XG4gIHZhciBkZWZpbml0aW9uID0gTW9kZWwuc2NoZW1hLm9iajtcbiAgdmFyIHF1ZXJ5ID0ge307XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMod2hlcmUpO3ZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTt2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTt2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7dHJ5IHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBrZXlzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge3ZhciBrZXkgPSBfc3RlcC52YWx1ZTtcbiAgICAgIGlmICghZGVmaW5pdGlvbltrZXldKSBjb250aW51ZTtcbiAgICAgIHZhciBwcm9wZXJ0eSA9IGRlZmluaXRpb25ba2V5XTtcbiAgICAgIHZhciB2YWx1ZSA9IHdoZXJlW2tleV07XG4gICAgICBzd2l0Y2ggKHByb3BlcnR5LnR5cGUpIHtcbiAgICAgICAgY2FzZSBTdHJpbmc6XG4gICAgICAgICAgaWYgKHByb3BlcnR5LmVudW0pIHtcbiAgICAgICAgICAgIHF1ZXJ5W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcXVlcnlba2V5XSA9IG5ldyBSZWdFeHAodmFsdWUsICdpJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHF1ZXJ5W2tleV0gPSB2YWx1ZTt9XG5cbiAgICB9fSBjYXRjaCAoZXJyKSB7X2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO19pdGVyYXRvckVycm9yID0gZXJyO30gZmluYWxseSB7dHJ5IHtpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge19pdGVyYXRvci5yZXR1cm4oKTt9fSBmaW5hbGx5IHtpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHt0aHJvdyBfaXRlcmF0b3JFcnJvcjt9fX1cbiAgcmV0dXJuIHF1ZXJ5O1xufTtcblxudmFyIHByb2Nlc3NQb3B1bGF0ZSA9IGZ1bmN0aW9uIHByb2Nlc3NQb3B1bGF0ZShwb3B1bGF0ZSkge1xuICB2YXIgZmllbGRzID0gcG9wdWxhdGUgPyBwb3B1bGF0ZS5zcGxpdCgnLCcpIDogW107XG4gIHJldHVybiBmaWVsZHMubWFwKGZ1bmN0aW9uIChmaWVsZCkge1xuICAgIHZhciBxdWVyeSA9IHt9O1xuICAgIHZhciBjdXJzb3IgPSBxdWVyeTtcbiAgICB2YXIgdG9rZW5zID0gZmllbGQuc3BsaXQoJy4nKTt2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO3ZhciBfZGlkSXRlcmF0b3JFcnJvcjIgPSBmYWxzZTt2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO3RyeSB7XG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gdG9rZW5zW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7dmFyIHRva2VuID0gX3N0ZXAyLnZhbHVlO1xuICAgICAgICBjdXJzb3IgPSBjdXJzb3IucG9wdWxhdGUgPSB7IHBhdGg6IHRva2VuIH07XG4gICAgICB9fSBjYXRjaCAoZXJyKSB7X2RpZEl0ZXJhdG9yRXJyb3IyID0gdHJ1ZTtfaXRlcmF0b3JFcnJvcjIgPSBlcnI7fSBmaW5hbGx5IHt0cnkge2lmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHtfaXRlcmF0b3IyLnJldHVybigpO319IGZpbmFsbHkge2lmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHt0aHJvdyBfaXRlcmF0b3JFcnJvcjI7fX19XG4gICAgcmV0dXJuIHF1ZXJ5LnBvcHVsYXRlO1xuICB9KTtcbn07XG5cbnZhciBnZXRSZXF1ZXN0T3B0aW9ucyA9IGZ1bmN0aW9uIGdldFJlcXVlc3RPcHRpb25zKHJlcSkge3ZhciBfcmVxJHF1ZXJ5ID1cblxuXG5cblxuXG5cbiAgcmVxLnF1ZXJ5LF9yZXEkcXVlcnkkc29ydCA9IF9yZXEkcXVlcnkuc29ydCxzb3J0ID0gX3JlcSRxdWVyeSRzb3J0ID09PSB1bmRlZmluZWQgPyBudWxsIDogX3JlcSRxdWVyeSRzb3J0LF9yZXEkcXVlcnkkc2tpcCA9IF9yZXEkcXVlcnkuc2tpcCxza2lwID0gX3JlcSRxdWVyeSRza2lwID09PSB1bmRlZmluZWQgPyBudWxsIDogX3JlcSRxdWVyeSRza2lwLF9yZXEkcXVlcnkkbGltaXQgPSBfcmVxJHF1ZXJ5LmxpbWl0LGxpbWl0ID0gX3JlcSRxdWVyeSRsaW1pdCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF9yZXEkcXVlcnkkbGltaXQsX3JlcSRxdWVyeSRwb3B1bGF0ZSA9IF9yZXEkcXVlcnkucG9wdWxhdGUscG9wdWxhdGUgPSBfcmVxJHF1ZXJ5JHBvcHVsYXRlID09PSB1bmRlZmluZWQgPyBudWxsIDogX3JlcSRxdWVyeSRwb3B1bGF0ZSxfd2hlcmUgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlcSRxdWVyeSwgWydzb3J0JywgJ3NraXAnLCAnbGltaXQnLCAncG9wdWxhdGUnXSk7XG4gIHJldHVybiB7XG4gICAgc29ydDogc29ydCxcbiAgICBza2lwOiBza2lwLFxuICAgIGxpbWl0OiBsaW1pdCxcbiAgICBwb3B1bGF0ZTogcHJvY2Vzc1BvcHVsYXRlKHBvcHVsYXRlKSxcbiAgICB3aGVyZTogZnVuY3Rpb24gd2hlcmUoT2JqZWN0KSB7cmV0dXJuIHByb2Nlc3NXaGVyZShPYmplY3QsIF93aGVyZSk7fSB9O1xuXG59O1xuXG5yb3V0ZXIudXNlKGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xuICByZXEub3B0aW9ucyA9IGdldFJlcXVlc3RPcHRpb25zKHJlcSk7XG5cbiAgcmVzLnJldHVybiA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICB2YXIgZmxhdCA9IHt9O1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTt2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlO3ZhciBfZGlkSXRlcmF0b3JFcnJvcjMgPSBmYWxzZTt2YXIgX2l0ZXJhdG9yRXJyb3IzID0gdW5kZWZpbmVkO3RyeSB7XG4gICAgICBmb3IgKHZhciBfaXRlcmF0b3IzID0ga2V5c1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMzsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IChfc3RlcDMgPSBfaXRlcmF0b3IzLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZSkge3ZhciBrZXkgPSBfc3RlcDMudmFsdWU7XG4gICAgICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgICBpZiAoKDAsIF91dGlsLmlzTW9uZ29vc2VPYmplY3QpKHZhbHVlKSkge1xuICAgICAgICAgIGZsYXRba2V5XSA9IHZhbHVlLnRvSlNPTih7IHJlcTogcmVxIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmICgwLCBfdXRpbC5pc01vbmdvb3NlT2JqZWN0KSh2YWx1ZVswXSkpIHtcbiAgICAgICAgICBmbGF0W2tleV0gPSB2YWx1ZS5tYXAoZnVuY3Rpb24gKGVsZW0pIHtyZXR1cm4gZWxlbS50b0pTT04oeyByZXE6IHJlcSB9KTt9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmbGF0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfX0gY2F0Y2ggKGVycikge19kaWRJdGVyYXRvckVycm9yMyA9IHRydWU7X2l0ZXJhdG9yRXJyb3IzID0gZXJyO30gZmluYWxseSB7dHJ5IHtpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zICYmIF9pdGVyYXRvcjMucmV0dXJuKSB7X2l0ZXJhdG9yMy5yZXR1cm4oKTt9fSBmaW5hbGx5IHtpZiAoX2RpZEl0ZXJhdG9yRXJyb3IzKSB7dGhyb3cgX2l0ZXJhdG9yRXJyb3IzO319fVxuICAgIHJlcy5qc29uKGZsYXQpO1xuICB9O3ZhclxuXG4gIHRva2VuID0gcmVxLmNvb2tpZXMudG9rZW47XG4gIGlmICh0b2tlbikge1xuICAgIF9tb2RlbHMuQXV0aC52ZXJpZnkodG9rZW4pLlxuICAgIGNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlcy5jb29raWUoJ3Rva2VuJywgJycpO1xuICAgICAgdGhyb3cgbmV3IF9lcnJvci5BdXRob3JpemF0aW9uRXJyb3IoKTtcbiAgICB9KS5cbiAgICB0aGVuKGZ1bmN0aW9uIChhdXRoKSB7cmV0dXJuIF9tb2RlbHMuQXV0aC5wb3B1bGF0ZShhdXRoLCAndXNlcicpO30pLlxuICAgIHRoZW4oZnVuY3Rpb24gKGF1dGgpIHtyZXR1cm4gYXV0aC5yZWZyZXNoKCk7fSkuXG4gICAgdGhlbihmdW5jdGlvbiAoYXV0aCkge1xuICAgICAgcmVxLmF1dGhvciA9IGF1dGgudXNlcjtcbiAgICAgIG5leHQoKTtcbiAgICB9KS5cbiAgICBjYXRjaChuZXh0KTtcbiAgfSBlbHNlIHtcbiAgICByZXEuYXV0aG9yID0gbmV3IF9tb2RlbHMuVXNlcigpO1xuICAgIG5leHQoKTtcbiAgfVxufSk7XG5yb3V0ZXIudXNlKCcvYXV0aCcsIF9hdXRoMi5kZWZhdWx0KTtcbnJvdXRlci51c2UoJy9yYXRpbmcnLCAoMCwgX0NvZGVIaWdoUm91dGVyMi5kZWZhdWx0KShfbW9kZWxzLlJhdGluZywgJ3JhdGluZycsICdyYXRpbmdzJykpO1xucm91dGVyLnVzZSgnL3NvbHV0aW9uJywgX3NvbHV0aW9uMi5kZWZhdWx0KTtcbnJvdXRlci51c2UoJy90b3BpYycsICgwLCBfQ29kZUhpZ2hSb3V0ZXIyLmRlZmF1bHQpKF9tb2RlbHMuVG9waWMsICd0b3BpYycsICd0b3BpY3MnKSk7XG5yb3V0ZXIudXNlKCcvdXNlcicsICgwLCBfQ29kZUhpZ2hSb3V0ZXIyLmRlZmF1bHQpKF9tb2RlbHMuVXNlciwgJ3VzZXInLCAndXNlcnMnLCBfdXRpbC5yZXBsYWNlTWUpKTtcbnJvdXRlci51c2UoZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7cmV0dXJuIG5leHQobmV3IF9lcnJvci5Ob3RGb3VuZEVycm9yKCkpO30pO1xucm91dGVyLnVzZShmdW5jdGlvbiAoZXJyLCByZXEsIHJlcywgbmV4dCkge1xuICB2YXIgc3RhdHVzTWFwID0gW1xuICBbX2Vycm9yLkF1dGhvcml6YXRpb25FcnJvciwgNDAxXSxcbiAgW19lcnJvci5QZXJtaXNzaW9uRXJyb3IsIDQwM10sXG4gIFtfZXJyb3IuTm90Rm91bmRFcnJvciwgNDA0XSxcbiAgW0Vycm9yLCA1MDBdXTt2YXIgX3N0YXR1c01hcCRmaW5kID1cblxuICBzdGF0dXNNYXAuZmluZChmdW5jdGlvbiAoX3JlZikge3ZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDEpLEVycm9yID0gX3JlZjJbMF07cmV0dXJuIGVyciBpbnN0YW5jZW9mIEVycm9yO30pLF9zdGF0dXNNYXAkZmluZDIgPSBfc2xpY2VkVG9BcnJheShfc3RhdHVzTWFwJGZpbmQsIDIpLHN0YXR1cyA9IF9zdGF0dXNNYXAkZmluZDJbMV07XG4gIHJlcy5zdGF0dXMoc3RhdHVzKTtcbiAgcmVzLmpzb24oe1xuICAgIHN0YXR1czogc3RhdHVzLFxuICAgIGVycjogZXJyIH0pO1xuXG4gIGNvbnNvbGUuZXJyb3IoZXJyKTtcbn0pO2V4cG9ydHMuZGVmYXVsdCA9XG5cbnJvdXRlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9iYWNrZW5kL2NvbnRyb2xsZXJzL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAuL3NyYy9iYWNrZW5kL2NvbnRyb2xsZXJzL2luZGV4LmpzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/backend/controllers/index.js\n");

/***/ }),

/***/ "./src/backend/models/Solution.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("Object.defineProperty(exports, \"__esModule\", { value: true });var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i[\"return\"]) _i[\"return\"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}};}();var _mongoose = __webpack_require__(\"mongoose\");var _mongoose2 = _interopRequireDefault(_mongoose);\nvar _db = __webpack_require__(\"./src/backend/common/db.js\");var _db2 = _interopRequireDefault(_db);\nvar _plugins = __webpack_require__(\"./src/backend/models/plugins/index.js\");\nvar _Topic = __webpack_require__(\"./src/backend/models/Topic.js\");var _Topic2 = _interopRequireDefault(_Topic);\nvar _Rating = __webpack_require__(\"./src/backend/models/Rating.js\");var _Rating2 = _interopRequireDefault(_Rating);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}var\n\nSchema = _mongoose2.default.Schema;var\nObjectId = Schema.Types.ObjectId;\n\nvar modelName = 'Solution';\nvar solutionSchema = new Schema({\n  topic: { type: ObjectId, ref: 'Topic', required: true },\n  time: { type: Number, required: true },\n  code: { type: String, required: true },\n  average_stars: { type: Number },\n  author: { type: ObjectId, ref: 'User' } });\n\n\nsolutionSchema.plugin(_plugins.authorPlugin, {\n  authorField: true,\n  insert: {\n    user: true },\n\n  modify: {\n    none: true },\n\n  get: {\n    guest: true },\n\n  remove: {\n    none: true } });\n\n\n\nsolutionSchema.methods.rate = function (stars, author) {\n  var solution = this;var\n  topic = solution.topic;\n  var query = { solution: solution, author: author };\n  var body = { solution: solution, stars: stars, author: author };\n  return _Rating2.default.findOneAndUpdate(query, body, { upsert: true }).\n  then(function () {return _Rating2.default.aggregate([{\n      $match: { solution: new _mongoose2.default.Types.ObjectId(solution._id) } },\n    {\n      $group: { _id: null, average_stars: { $avg: '$stars' } } }]);}).\n\n  then(function (_ref) {var _ref2 = _slicedToArray(_ref, 1),average_stars = _ref2[0].average_stars;\n    solution.average_stars = average_stars;\n    return solution.force().save();\n  }).\n  then(function () {return Solution.find({ topic: topic }).sort({ average_stars: -1 }).limit(5);}).\n  then(function (top_solutions) {return _Topic2.default.findByIdAndUpdate(topic, { $set: { top_solutions: top_solutions } });}).\n  then(function () {return solution;});\n};\n\nvar Solution = _db2.default.model(modelName, solutionSchema);exports.default =\nSolution;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYmFja2VuZC9tb2RlbHMvU29sdXRpb24uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYmFja2VuZC9tb2RlbHMvU29sdXRpb24uanM/NTQ2OSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO3ZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHtmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkge3ZhciBfYXJyID0gW107dmFyIF9uID0gdHJ1ZTt2YXIgX2QgPSBmYWxzZTt2YXIgX2UgPSB1bmRlZmluZWQ7dHJ5IHtmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7X2Fyci5wdXNoKF9zLnZhbHVlKTtpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7fX0gY2F0Y2ggKGVycikge19kID0gdHJ1ZTtfZSA9IGVycjt9IGZpbmFsbHkge3RyeSB7aWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSkgX2lbXCJyZXR1cm5cIl0oKTt9IGZpbmFsbHkge2lmIChfZCkgdGhyb3cgX2U7fX1yZXR1cm4gX2Fycjt9cmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHtpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7cmV0dXJuIGFycjt9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkge3JldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7fSBlbHNlIHt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTt9fTt9KCk7dmFyIF9tb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7dmFyIF9tb25nb29zZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tb25nb29zZSk7XG52YXIgX2RiID0gcmVxdWlyZSgnL2NvbW1vbi9kYicpO3ZhciBfZGIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGIpO1xudmFyIF9wbHVnaW5zID0gcmVxdWlyZSgnL21vZGVscy9wbHVnaW5zJyk7XG52YXIgX1RvcGljID0gcmVxdWlyZSgnLi9Ub3BpYycpO3ZhciBfVG9waWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfVG9waWMpO1xudmFyIF9SYXRpbmcgPSByZXF1aXJlKCcuL1JhdGluZycpO3ZhciBfUmF0aW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1JhdGluZyk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtyZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTt9dmFyXG5cblNjaGVtYSA9IF9tb25nb29zZTIuZGVmYXVsdC5TY2hlbWE7dmFyXG5PYmplY3RJZCA9IFNjaGVtYS5UeXBlcy5PYmplY3RJZDtcblxudmFyIG1vZGVsTmFtZSA9ICdTb2x1dGlvbic7XG52YXIgc29sdXRpb25TY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgdG9waWM6IHsgdHlwZTogT2JqZWN0SWQsIHJlZjogJ1RvcGljJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgdGltZTogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGNvZGU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBhdmVyYWdlX3N0YXJzOiB7IHR5cGU6IE51bWJlciB9LFxuICBhdXRob3I6IHsgdHlwZTogT2JqZWN0SWQsIHJlZjogJ1VzZXInIH0gfSk7XG5cblxuc29sdXRpb25TY2hlbWEucGx1Z2luKF9wbHVnaW5zLmF1dGhvclBsdWdpbiwge1xuICBhdXRob3JGaWVsZDogdHJ1ZSxcbiAgaW5zZXJ0OiB7XG4gICAgdXNlcjogdHJ1ZSB9LFxuXG4gIG1vZGlmeToge1xuICAgIG5vbmU6IHRydWUgfSxcblxuICBnZXQ6IHtcbiAgICBndWVzdDogdHJ1ZSB9LFxuXG4gIHJlbW92ZToge1xuICAgIG5vbmU6IHRydWUgfSB9KTtcblxuXG5cbnNvbHV0aW9uU2NoZW1hLm1ldGhvZHMucmF0ZSA9IGZ1bmN0aW9uIChzdGFycywgYXV0aG9yKSB7XG4gIHZhciBzb2x1dGlvbiA9IHRoaXM7dmFyXG4gIHRvcGljID0gc29sdXRpb24udG9waWM7XG4gIHZhciBxdWVyeSA9IHsgc29sdXRpb246IHNvbHV0aW9uLCBhdXRob3I6IGF1dGhvciB9O1xuICB2YXIgYm9keSA9IHsgc29sdXRpb246IHNvbHV0aW9uLCBzdGFyczogc3RhcnMsIGF1dGhvcjogYXV0aG9yIH07XG4gIHJldHVybiBfUmF0aW5nMi5kZWZhdWx0LmZpbmRPbmVBbmRVcGRhdGUocXVlcnksIGJvZHksIHsgdXBzZXJ0OiB0cnVlIH0pLlxuICB0aGVuKGZ1bmN0aW9uICgpIHtyZXR1cm4gX1JhdGluZzIuZGVmYXVsdC5hZ2dyZWdhdGUoW3tcbiAgICAgICRtYXRjaDogeyBzb2x1dGlvbjogbmV3IF9tb25nb29zZTIuZGVmYXVsdC5UeXBlcy5PYmplY3RJZChzb2x1dGlvbi5faWQpIH0gfSxcbiAgICB7XG4gICAgICAkZ3JvdXA6IHsgX2lkOiBudWxsLCBhdmVyYWdlX3N0YXJzOiB7ICRhdmc6ICckc3RhcnMnIH0gfSB9XSk7fSkuXG5cbiAgdGhlbihmdW5jdGlvbiAoX3JlZikge3ZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDEpLGF2ZXJhZ2Vfc3RhcnMgPSBfcmVmMlswXS5hdmVyYWdlX3N0YXJzO1xuICAgIHNvbHV0aW9uLmF2ZXJhZ2Vfc3RhcnMgPSBhdmVyYWdlX3N0YXJzO1xuICAgIHJldHVybiBzb2x1dGlvbi5mb3JjZSgpLnNhdmUoKTtcbiAgfSkuXG4gIHRoZW4oZnVuY3Rpb24gKCkge3JldHVybiBTb2x1dGlvbi5maW5kKHsgdG9waWM6IHRvcGljIH0pLnNvcnQoeyBhdmVyYWdlX3N0YXJzOiAtMSB9KS5saW1pdCg1KTt9KS5cbiAgdGhlbihmdW5jdGlvbiAodG9wX3NvbHV0aW9ucykge3JldHVybiBfVG9waWMyLmRlZmF1bHQuZmluZEJ5SWRBbmRVcGRhdGUodG9waWMsIHsgJHNldDogeyB0b3Bfc29sdXRpb25zOiB0b3Bfc29sdXRpb25zIH0gfSk7fSkuXG4gIHRoZW4oZnVuY3Rpb24gKCkge3JldHVybiBzb2x1dGlvbjt9KTtcbn07XG5cbnZhciBTb2x1dGlvbiA9IF9kYjIuZGVmYXVsdC5tb2RlbChtb2RlbE5hbWUsIHNvbHV0aW9uU2NoZW1hKTtleHBvcnRzLmRlZmF1bHQgPVxuU29sdXRpb247XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvYmFja2VuZC9tb2RlbHMvU29sdXRpb24uanNcbi8vIG1vZHVsZSBpZCA9IC4vc3JjL2JhY2tlbmQvbW9kZWxzL1NvbHV0aW9uLmpzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/backend/models/Solution.js\n");

/***/ }),

/***/ "./src/backend/models/Topic.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("Object.defineProperty(exports, \"__esModule\", { value: true });var _mongoose = __webpack_require__(\"mongoose\");var _mongoose2 = _interopRequireDefault(_mongoose);\nvar _db = __webpack_require__(\"./src/backend/common/db.js\");var _db2 = _interopRequireDefault(_db);\nvar _plugins = __webpack_require__(\"./src/backend/models/plugins/index.js\");\nvar _nested = __webpack_require__(\"./src/backend/models/nested/index.js\");function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}var\n\nSchema = _mongoose2.default.Schema;var\nObjectId = Schema.Types.ObjectId;\n\nvar modelName = 'Topic';\nvar topicSchema = new Schema({\n  title: { type: String, required: true },\n  content: { type: String, required: true },\n  time: { type: Number, required: true, min: 1, validate: Number.isInteger },\n  testcases: { type: [_nested.Testcase], default: [] },\n  top_solutions: [{ type: ObjectId, ref: 'Solution', required: true }],\n  author: { type: ObjectId, ref: 'User' } });\n\n\ntopicSchema.plugin(_plugins.authorPlugin, {\n  authorField: true,\n  set: {\n    none: ['top_solutions'] },\n\n  insert: {\n    user: true },\n\n  modify: {\n    owner: true },\n\n  get: {\n    guest: true },\n\n  remove: {\n    owner: true } });\n\n\n\nvar Topic = _db2.default.model(modelName, topicSchema);exports.default =\nTopic;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYmFja2VuZC9tb2RlbHMvVG9waWMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYmFja2VuZC9tb2RlbHMvVG9waWMuanM/ZTNiYyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO3ZhciBfbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO3ZhciBfbW9uZ29vc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbW9uZ29vc2UpO1xudmFyIF9kYiA9IHJlcXVpcmUoJy9jb21tb24vZGInKTt2YXIgX2RiMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RiKTtcbnZhciBfcGx1Z2lucyA9IHJlcXVpcmUoJy9tb2RlbHMvcGx1Z2lucycpO1xudmFyIF9uZXN0ZWQgPSByZXF1aXJlKCcuL25lc3RlZCcpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7cmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07fXZhclxuXG5TY2hlbWEgPSBfbW9uZ29vc2UyLmRlZmF1bHQuU2NoZW1hO3ZhclxuT2JqZWN0SWQgPSBTY2hlbWEuVHlwZXMuT2JqZWN0SWQ7XG5cbnZhciBtb2RlbE5hbWUgPSAnVG9waWMnO1xudmFyIHRvcGljU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIHRpdGxlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgY29udGVudDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHRpbWU6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSwgbWluOiAxLCB2YWxpZGF0ZTogTnVtYmVyLmlzSW50ZWdlciB9LFxuICB0ZXN0Y2FzZXM6IHsgdHlwZTogW19uZXN0ZWQuVGVzdGNhc2VdLCBkZWZhdWx0OiBbXSB9LFxuICB0b3Bfc29sdXRpb25zOiBbeyB0eXBlOiBPYmplY3RJZCwgcmVmOiAnU29sdXRpb24nLCByZXF1aXJlZDogdHJ1ZSB9XSxcbiAgYXV0aG9yOiB7IHR5cGU6IE9iamVjdElkLCByZWY6ICdVc2VyJyB9IH0pO1xuXG5cbnRvcGljU2NoZW1hLnBsdWdpbihfcGx1Z2lucy5hdXRob3JQbHVnaW4sIHtcbiAgYXV0aG9yRmllbGQ6IHRydWUsXG4gIHNldDoge1xuICAgIG5vbmU6IFsndG9wX3NvbHV0aW9ucyddIH0sXG5cbiAgaW5zZXJ0OiB7XG4gICAgdXNlcjogdHJ1ZSB9LFxuXG4gIG1vZGlmeToge1xuICAgIG93bmVyOiB0cnVlIH0sXG5cbiAgZ2V0OiB7XG4gICAgZ3Vlc3Q6IHRydWUgfSxcblxuICByZW1vdmU6IHtcbiAgICBvd25lcjogdHJ1ZSB9IH0pO1xuXG5cblxudmFyIFRvcGljID0gX2RiMi5kZWZhdWx0Lm1vZGVsKG1vZGVsTmFtZSwgdG9waWNTY2hlbWEpO2V4cG9ydHMuZGVmYXVsdCA9XG5Ub3BpYztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9iYWNrZW5kL21vZGVscy9Ub3BpYy5qc1xuLy8gbW9kdWxlIGlkID0gLi9zcmMvYmFja2VuZC9tb2RlbHMvVG9waWMuanNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/backend/models/Topic.js\n");

/***/ }),

/***/ "./src/backend/models/auction.js":
false,

/***/ "./src/backend/models/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("Object.defineProperty(exports, \"__esModule\", { value: true });var _Auth = __webpack_require__(\"./src/backend/models/Auth.js\");Object.defineProperty(exports, 'Auth', { enumerable: true, get: function get() {return _interopRequireDefault(_Auth).default;} });var _Rating = __webpack_require__(\"./src/backend/models/Rating.js\");Object.defineProperty(exports, 'Rating', { enumerable: true, get: function get() {return _interopRequireDefault(_Rating).\n    default;} });var _Solution = __webpack_require__(\"./src/backend/models/Solution.js\");Object.defineProperty(exports, 'Solution', { enumerable: true, get: function get() {return _interopRequireDefault(_Solution).\n    default;} });var _Topic = __webpack_require__(\"./src/backend/models/Topic.js\");Object.defineProperty(exports, 'Topic', { enumerable: true, get: function get() {return _interopRequireDefault(_Topic).\n    default;} });var _User = __webpack_require__(\"./src/backend/models/User.js\");Object.defineProperty(exports, 'User', { enumerable: true, get: function get() {return _interopRequireDefault(_User).\n    default;} });function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYmFja2VuZC9tb2RlbHMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYmFja2VuZC9tb2RlbHMvaW5kZXguanM/ODcwMSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO3ZhciBfQXV0aCA9IHJlcXVpcmUoJy4vQXV0aCcpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnQXV0aCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7cmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0F1dGgpLmRlZmF1bHQ7fSB9KTt2YXIgX1JhdGluZyA9IHJlcXVpcmUoJy4vUmF0aW5nJyk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdSYXRpbmcnLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gZ2V0KCkge3JldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SYXRpbmcpLlxuICAgIGRlZmF1bHQ7fSB9KTt2YXIgX1NvbHV0aW9uID0gcmVxdWlyZSgnLi9Tb2x1dGlvbicpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnU29sdXRpb24nLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gZ2V0KCkge3JldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Tb2x1dGlvbikuXG4gICAgZGVmYXVsdDt9IH0pO3ZhciBfVG9waWMgPSByZXF1aXJlKCcuL1RvcGljJyk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdUb3BpYycsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7cmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RvcGljKS5cbiAgICBkZWZhdWx0O30gfSk7dmFyIF9Vc2VyID0gcmVxdWlyZSgnLi9Vc2VyJyk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdVc2VyJywgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtyZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfVXNlcikuXG4gICAgZGVmYXVsdDt9IH0pO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7cmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07fVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2JhY2tlbmQvbW9kZWxzL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAuL3NyYy9iYWNrZW5kL21vZGVscy9pbmRleC5qc1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/backend/models/index.js\n");

/***/ }),

/***/ "./src/backend/socket/Game.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("Object.defineProperty(exports, \"__esModule\", { value: true });var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();var _Emitter2 = __webpack_require__(\"./src/backend/socket/Emitter.js\");var _Emitter3 = _interopRequireDefault(_Emitter2);\nvar _randomstring = __webpack_require__(\"randomstring\");var _randomstring2 = _interopRequireDefault(_randomstring);\nvar _models = __webpack_require__(\"./src/backend/models/index.js\");function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self, call) {if (!self) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;}\n\nvar COUNTDOWN = 10;\nvar MIN_PLAYERS = 2;\nvar MAX_PLAYERS = 8;\nvar INTERVAL = 100;var\n\nGame = function (_Emitter) {_inherits(Game, _Emitter);\n  function Game(io, onRemove) {_classCallCheck(this, Game);var _this = _possibleConstructorReturn(this, (Game.__proto__ || Object.getPrototypeOf(Game)).call(this,\n    io, _randomstring2.default.generate()));\n\n    _this.countdown_at = null;\n    _this.started_at = null;\n    _this.updated_at = null;\n    _this.finished_at = null;\n    _this.players = [];\n    _this.topic = null;\n\n    var timer = setInterval(function () {\n      var now = new Date();\n      if (_this.topic) {\n        if (_this.started_at && now - _this.started_at >= _this.topic.time * 1000) {\n          _this.finish();\n        }\n        if (_this.finished_at && now - _this.finished_at >= _this.topic.time * _this.players.length * 1000) {\n          clearInterval(timer);\n          _this.remove();\n          onRemove();\n        }\n      } else {\n        if (_this.countdown_at && now - _this.countdown_at >= COUNTDOWN * 1000) {\n          _this.start();\n        }\n      }\n    }, INTERVAL);return _this;\n  }_createClass(Game, [{ key: 'findPlayer', value: function findPlayer(\n\n    author) {var filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {return true;};\n      return this.players.find(function (player) {return author.fb_user_id === player.user.fb_user_id && filter(player);});\n    } }, { key: 'addPlayer', value: function addPlayer(\n\n    player) {\n      this.players.push(player);\n      this.updatePlayers();\n    } }, { key: 'removePlayer', value: function removePlayer(\n\n    player) {\n      var index = this.players.indexOf(player);\n      if (~index) {\n        this.players.splice(index, 1);\n        this.updatePlayers();\n      }\n    } }, { key: 'isEveryoneDone', value: function isEveryoneDone()\n\n    {\n      return this.players.every(function (player) {return player.isDone();});\n    } }, { key: 'isPlaying', value: function isPlaying()\n\n    {\n      return this.started_at && !this.finished_at;\n    } }, { key: 'updatePlayers', value: function updatePlayers()\n\n    {\n      if (this.players.length >= MAX_PLAYERS) return this.start();\n      this.countdown_at = this.players.length >= MIN_PLAYERS ? new Date() : null;\n      this.update();\n    } }, { key: 'start', value: function start()\n\n    {var _this2 = this;\n      if (!this.started_at) {\n        this.started_at = new Date();\n        _models.Topic.count().\n        then(function (count) {\n          var random = Math.floor(Math.random() * count);\n          return _models.Topic.findOne().skip(random);\n        }).\n        then(function (topic) {\n          _this2.topic = topic.toJSON({ req: {} });\n          _this2.update();\n        }).\n        catch(console.error);\n      }\n    } }, { key: 'update', value: function update()\n\n    {\n      this.updated_at = new Date();\n      this.emit('GAME_UPDATED', this);\n    } }, { key: 'finish', value: function finish()\n\n    {\n      if (this.isPlaying()) {\n        this.finished_at = new Date();\n        this.update();\n      }\n    } }, { key: 'remove', value: function remove()\n\n    {\n      this.emit('GAME_REMOVED');\n    } }, { key: 'toJSON', value: function toJSON()\n\n    {var\n\n      countdown_at =\n\n\n\n\n\n      this.countdown_at,started_at = this.started_at,updated_at = this.updated_at,finished_at = this.finished_at,players = this.players,topic = this.topic;\n      return {\n        countdown_at: countdown_at,\n        started_at: started_at,\n        updated_at: updated_at,\n        finished_at: finished_at,\n        players: players,\n        topic: topic };\n\n    } }]);return Game;}(_Emitter3.default);exports.default =\n\n\nGame;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYmFja2VuZC9zb2NrZXQvR2FtZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9iYWNrZW5kL3NvY2tldC9HYW1lLmpzP2YxNGEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTt2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge2Z1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge2ZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHt2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7fX1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge2lmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO307fSgpO3ZhciBfRW1pdHRlcjIgPSByZXF1aXJlKCcuL0VtaXR0ZXInKTt2YXIgX0VtaXR0ZXIzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRW1pdHRlcjIpO1xudmFyIF9yYW5kb21zdHJpbmcgPSByZXF1aXJlKCdyYW5kb21zdHJpbmcnKTt2YXIgX3JhbmRvbXN0cmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yYW5kb21zdHJpbmcpO1xudmFyIF9tb2RlbHMgPSByZXF1aXJlKCcvbW9kZWxzJyk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtyZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTt9ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge2lmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTt9fWZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtpZiAoIXNlbGYpIHt0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7fXJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO31mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7dGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7fXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO31cblxudmFyIENPVU5URE9XTiA9IDEwO1xudmFyIE1JTl9QTEFZRVJTID0gMjtcbnZhciBNQVhfUExBWUVSUyA9IDg7XG52YXIgSU5URVJWQUwgPSAxMDA7dmFyXG5cbkdhbWUgPSBmdW5jdGlvbiAoX0VtaXR0ZXIpIHtfaW5oZXJpdHMoR2FtZSwgX0VtaXR0ZXIpO1xuICBmdW5jdGlvbiBHYW1lKGlvLCBvblJlbW92ZSkge19jbGFzc0NhbGxDaGVjayh0aGlzLCBHYW1lKTt2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoR2FtZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEdhbWUpKS5jYWxsKHRoaXMsXG4gICAgaW8sIF9yYW5kb21zdHJpbmcyLmRlZmF1bHQuZ2VuZXJhdGUoKSkpO1xuXG4gICAgX3RoaXMuY291bnRkb3duX2F0ID0gbnVsbDtcbiAgICBfdGhpcy5zdGFydGVkX2F0ID0gbnVsbDtcbiAgICBfdGhpcy51cGRhdGVkX2F0ID0gbnVsbDtcbiAgICBfdGhpcy5maW5pc2hlZF9hdCA9IG51bGw7XG4gICAgX3RoaXMucGxheWVycyA9IFtdO1xuICAgIF90aGlzLnRvcGljID0gbnVsbDtcblxuICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgaWYgKF90aGlzLnRvcGljKSB7XG4gICAgICAgIGlmIChfdGhpcy5zdGFydGVkX2F0ICYmIG5vdyAtIF90aGlzLnN0YXJ0ZWRfYXQgPj0gX3RoaXMudG9waWMudGltZSAqIDEwMDApIHtcbiAgICAgICAgICBfdGhpcy5maW5pc2goKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3RoaXMuZmluaXNoZWRfYXQgJiYgbm93IC0gX3RoaXMuZmluaXNoZWRfYXQgPj0gX3RoaXMudG9waWMudGltZSAqIF90aGlzLnBsYXllcnMubGVuZ3RoICogMTAwMCkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuICAgICAgICAgIF90aGlzLnJlbW92ZSgpO1xuICAgICAgICAgIG9uUmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChfdGhpcy5jb3VudGRvd25fYXQgJiYgbm93IC0gX3RoaXMuY291bnRkb3duX2F0ID49IENPVU5URE9XTiAqIDEwMDApIHtcbiAgICAgICAgICBfdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgSU5URVJWQUwpO3JldHVybiBfdGhpcztcbiAgfV9jcmVhdGVDbGFzcyhHYW1lLCBbeyBrZXk6ICdmaW5kUGxheWVyJywgdmFsdWU6IGZ1bmN0aW9uIGZpbmRQbGF5ZXIoXG5cbiAgICBhdXRob3IpIHt2YXIgZmlsdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmdW5jdGlvbiAoKSB7cmV0dXJuIHRydWU7fTtcbiAgICAgIHJldHVybiB0aGlzLnBsYXllcnMuZmluZChmdW5jdGlvbiAocGxheWVyKSB7cmV0dXJuIGF1dGhvci5mYl91c2VyX2lkID09PSBwbGF5ZXIudXNlci5mYl91c2VyX2lkICYmIGZpbHRlcihwbGF5ZXIpO30pO1xuICAgIH0gfSwgeyBrZXk6ICdhZGRQbGF5ZXInLCB2YWx1ZTogZnVuY3Rpb24gYWRkUGxheWVyKFxuXG4gICAgcGxheWVyKSB7XG4gICAgICB0aGlzLnBsYXllcnMucHVzaChwbGF5ZXIpO1xuICAgICAgdGhpcy51cGRhdGVQbGF5ZXJzKCk7XG4gICAgfSB9LCB7IGtleTogJ3JlbW92ZVBsYXllcicsIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVQbGF5ZXIoXG5cbiAgICBwbGF5ZXIpIHtcbiAgICAgIHZhciBpbmRleCA9IHRoaXMucGxheWVycy5pbmRleE9mKHBsYXllcik7XG4gICAgICBpZiAofmluZGV4KSB7XG4gICAgICAgIHRoaXMucGxheWVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB0aGlzLnVwZGF0ZVBsYXllcnMoKTtcbiAgICAgIH1cbiAgICB9IH0sIHsga2V5OiAnaXNFdmVyeW9uZURvbmUnLCB2YWx1ZTogZnVuY3Rpb24gaXNFdmVyeW9uZURvbmUoKVxuXG4gICAge1xuICAgICAgcmV0dXJuIHRoaXMucGxheWVycy5ldmVyeShmdW5jdGlvbiAocGxheWVyKSB7cmV0dXJuIHBsYXllci5pc0RvbmUoKTt9KTtcbiAgICB9IH0sIHsga2V5OiAnaXNQbGF5aW5nJywgdmFsdWU6IGZ1bmN0aW9uIGlzUGxheWluZygpXG5cbiAgICB7XG4gICAgICByZXR1cm4gdGhpcy5zdGFydGVkX2F0ICYmICF0aGlzLmZpbmlzaGVkX2F0O1xuICAgIH0gfSwgeyBrZXk6ICd1cGRhdGVQbGF5ZXJzJywgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVBsYXllcnMoKVxuXG4gICAge1xuICAgICAgaWYgKHRoaXMucGxheWVycy5sZW5ndGggPj0gTUFYX1BMQVlFUlMpIHJldHVybiB0aGlzLnN0YXJ0KCk7XG4gICAgICB0aGlzLmNvdW50ZG93bl9hdCA9IHRoaXMucGxheWVycy5sZW5ndGggPj0gTUlOX1BMQVlFUlMgPyBuZXcgRGF0ZSgpIDogbnVsbDtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfSB9LCB7IGtleTogJ3N0YXJ0JywgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KClcblxuICAgIHt2YXIgX3RoaXMyID0gdGhpcztcbiAgICAgIGlmICghdGhpcy5zdGFydGVkX2F0KSB7XG4gICAgICAgIHRoaXMuc3RhcnRlZF9hdCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIF9tb2RlbHMuVG9waWMuY291bnQoKS5cbiAgICAgICAgdGhlbihmdW5jdGlvbiAoY291bnQpIHtcbiAgICAgICAgICB2YXIgcmFuZG9tID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY291bnQpO1xuICAgICAgICAgIHJldHVybiBfbW9kZWxzLlRvcGljLmZpbmRPbmUoKS5za2lwKHJhbmRvbSk7XG4gICAgICAgIH0pLlxuICAgICAgICB0aGVuKGZ1bmN0aW9uICh0b3BpYykge1xuICAgICAgICAgIF90aGlzMi50b3BpYyA9IHRvcGljLnRvSlNPTih7IHJlcToge30gfSk7XG4gICAgICAgICAgX3RoaXMyLnVwZGF0ZSgpO1xuICAgICAgICB9KS5cbiAgICAgICAgY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgICB9XG4gICAgfSB9LCB7IGtleTogJ3VwZGF0ZScsIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUoKVxuXG4gICAge1xuICAgICAgdGhpcy51cGRhdGVkX2F0ID0gbmV3IERhdGUoKTtcbiAgICAgIHRoaXMuZW1pdCgnR0FNRV9VUERBVEVEJywgdGhpcyk7XG4gICAgfSB9LCB7IGtleTogJ2ZpbmlzaCcsIHZhbHVlOiBmdW5jdGlvbiBmaW5pc2goKVxuXG4gICAge1xuICAgICAgaWYgKHRoaXMuaXNQbGF5aW5nKCkpIHtcbiAgICAgICAgdGhpcy5maW5pc2hlZF9hdCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB9XG4gICAgfSB9LCB7IGtleTogJ3JlbW92ZScsIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKVxuXG4gICAge1xuICAgICAgdGhpcy5lbWl0KCdHQU1FX1JFTU9WRUQnKTtcbiAgICB9IH0sIHsga2V5OiAndG9KU09OJywgdmFsdWU6IGZ1bmN0aW9uIHRvSlNPTigpXG5cbiAgICB7dmFyXG5cbiAgICAgIGNvdW50ZG93bl9hdCA9XG5cblxuXG5cblxuICAgICAgdGhpcy5jb3VudGRvd25fYXQsc3RhcnRlZF9hdCA9IHRoaXMuc3RhcnRlZF9hdCx1cGRhdGVkX2F0ID0gdGhpcy51cGRhdGVkX2F0LGZpbmlzaGVkX2F0ID0gdGhpcy5maW5pc2hlZF9hdCxwbGF5ZXJzID0gdGhpcy5wbGF5ZXJzLHRvcGljID0gdGhpcy50b3BpYztcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvdW50ZG93bl9hdDogY291bnRkb3duX2F0LFxuICAgICAgICBzdGFydGVkX2F0OiBzdGFydGVkX2F0LFxuICAgICAgICB1cGRhdGVkX2F0OiB1cGRhdGVkX2F0LFxuICAgICAgICBmaW5pc2hlZF9hdDogZmluaXNoZWRfYXQsXG4gICAgICAgIHBsYXllcnM6IHBsYXllcnMsXG4gICAgICAgIHRvcGljOiB0b3BpYyB9O1xuXG4gICAgfSB9XSk7cmV0dXJuIEdhbWU7fShfRW1pdHRlcjMuZGVmYXVsdCk7ZXhwb3J0cy5kZWZhdWx0ID1cblxuXG5HYW1lO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2JhY2tlbmQvc29ja2V0L0dhbWUuanNcbi8vIG1vZHVsZSBpZCA9IC4vc3JjL2JhY2tlbmQvc29ja2V0L0dhbWUuanNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/backend/socket/Game.js\n");

/***/ }),

/***/ "./src/backend/socket/Player.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("Object.defineProperty(exports, \"__esModule\", { value: true });var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();var _Emitter2 = __webpack_require__(\"./src/backend/socket/Emitter.js\");var _Emitter3 = _interopRequireDefault(_Emitter2);\nvar _models = __webpack_require__(\"./src/backend/models/index.js\");function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self, call) {if (!self) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;}var\n\nPlayer = function (_Emitter) {_inherits(Player, _Emitter);\n  function Player(io, game, author) {_classCallCheck(this, Player);var _this = _possibleConstructorReturn(this, (Player.__proto__ || Object.getPrototypeOf(Player)).call(this,\n    io, game.room));\n    _this.game = game;\n    _this.connected = 1;\n\n    _this.user = author;\n    _this.submitted_at = null;\n    _this.given_up_at = null;\n    _this.typing = false;\n    _this.solution = null;\n    _this.ratings = {};\n    _this.average_stars = null;return _this;\n  }_createClass(Player, [{ key: 'connect', value: function connect()\n\n    {\n      this.connected++;\n      this.game.update();\n    } }, { key: 'disconnect', value: function disconnect()\n\n    {\n      if (--this.connected < 1) {\n        if (!this.game.started_at) {\n          this.game.removePlayer(this);\n        } else if (this.game.isPlaying()) {\n          this.giveUp();\n        }\n      }\n    } }, { key: 'startTyping', value: function startTyping()\n\n    {\n      this.typing = true;\n      this.update();\n    } }, { key: 'stopTyping', value: function stopTyping()\n\n    {\n      this.typing = false;\n      this.update();\n    } }, { key: 'submit', value: function submit(\n\n    code) {var _this2 = this;\n      if (!this.isDone()) {\n        this.submitted_at = new Date();\n        new _models.Solution({\n          topic: this.game.topic,\n          time: (this.submitted_at - this.game.started_at) / 1000,\n          code: code,\n          author: this.user }).\n        force().save().\n        then(function (solution) {\n          _this2.solution = solution.toJSON({ req: {} });\n          if (_this2.game.isEveryoneDone()) return _this2.game.finish();\n          _this2.update();\n        }).\n        catch(console.error);\n      }\n    } }, { key: 'giveUp', value: function giveUp()\n\n    {\n      if (!this.isDone()) {\n        this.given_up_at = new Date();\n        if (this.game.isEveryoneDone()) return this.game.finish();\n        this.update();\n      }\n    } }, { key: 'isDone', value: function isDone()\n\n    {\n      return this.submitted_at || this.given_up_at;\n    } }, { key: 'update', value: function update()\n\n    {\n      this.updated_at = new Date();\n      this.emit('PLAYER_UPDATED', this);\n    } }, { key: 'rate', value: function rate(\n\n    solution_id, stars) {var _this3 = this;\n      _models.Solution.get(solution_id).\n      then(function (solution) {return solution.rate(stars, _this3.user);}).\n      then(function (solution) {\n        var ratedPlayer = _this3.game.players.find(function (player) {return player.solution && player.solution._id.equals(solution_id);});\n        ratedPlayer.average_stars = solution.average_stars;\n        ratedPlayer.ratings[_this3.user.fb_user_id] = stars;\n        _this3.game.players = _this3.game.players.sort(function (p1, p2) {return (p2.average_stars || 0) - (p1.average_stars || 0);});\n        _this3.game.update();\n      }).\n      catch(console.error);\n    } }, { key: 'toJSON', value: function toJSON()\n\n    {var\n\n      user =\n\n\n\n\n\n\n      this.user,submitted_at = this.submitted_at,given_up_at = this.given_up_at,typing = this.typing,solution = this.solution,ratings = this.ratings,average_stars = this.average_stars;\n      return {\n        user: user,\n        submitted_at: submitted_at,\n        given_up_at: given_up_at,\n        typing: typing,\n        solution: solution,\n        ratings: ratings,\n        average_stars: average_stars };\n\n    } }]);return Player;}(_Emitter3.default);exports.default =\n\n\nPlayer;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYmFja2VuZC9zb2NrZXQvUGxheWVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JhY2tlbmQvc29ja2V0L1BsYXllci5qcz9jZGM0Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7dmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO319cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9O30oKTt2YXIgX0VtaXR0ZXIyID0gcmVxdWlyZSgnLi9FbWl0dGVyJyk7dmFyIF9FbWl0dGVyMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0VtaXR0ZXIyKTtcbnZhciBfbW9kZWxzID0gcmVxdWlyZSgnL21vZGVscycpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7cmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07fWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge3Rocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7fX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7aWYgKCFzZWxmKSB7dGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO31yZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjt9ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7aWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge3Rocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpO31zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczt9dmFyXG5cblBsYXllciA9IGZ1bmN0aW9uIChfRW1pdHRlcikge19pbmhlcml0cyhQbGF5ZXIsIF9FbWl0dGVyKTtcbiAgZnVuY3Rpb24gUGxheWVyKGlvLCBnYW1lLCBhdXRob3IpIHtfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGxheWVyKTt2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUGxheWVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUGxheWVyKSkuY2FsbCh0aGlzLFxuICAgIGlvLCBnYW1lLnJvb20pKTtcbiAgICBfdGhpcy5nYW1lID0gZ2FtZTtcbiAgICBfdGhpcy5jb25uZWN0ZWQgPSAxO1xuXG4gICAgX3RoaXMudXNlciA9IGF1dGhvcjtcbiAgICBfdGhpcy5zdWJtaXR0ZWRfYXQgPSBudWxsO1xuICAgIF90aGlzLmdpdmVuX3VwX2F0ID0gbnVsbDtcbiAgICBfdGhpcy50eXBpbmcgPSBmYWxzZTtcbiAgICBfdGhpcy5zb2x1dGlvbiA9IG51bGw7XG4gICAgX3RoaXMucmF0aW5ncyA9IHt9O1xuICAgIF90aGlzLmF2ZXJhZ2Vfc3RhcnMgPSBudWxsO3JldHVybiBfdGhpcztcbiAgfV9jcmVhdGVDbGFzcyhQbGF5ZXIsIFt7IGtleTogJ2Nvbm5lY3QnLCB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdCgpXG5cbiAgICB7XG4gICAgICB0aGlzLmNvbm5lY3RlZCsrO1xuICAgICAgdGhpcy5nYW1lLnVwZGF0ZSgpO1xuICAgIH0gfSwgeyBrZXk6ICdkaXNjb25uZWN0JywgdmFsdWU6IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKVxuXG4gICAge1xuICAgICAgaWYgKC0tdGhpcy5jb25uZWN0ZWQgPCAxKSB7XG4gICAgICAgIGlmICghdGhpcy5nYW1lLnN0YXJ0ZWRfYXQpIHtcbiAgICAgICAgICB0aGlzLmdhbWUucmVtb3ZlUGxheWVyKHRoaXMpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ2FtZS5pc1BsYXlpbmcoKSkge1xuICAgICAgICAgIHRoaXMuZ2l2ZVVwKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IH0sIHsga2V5OiAnc3RhcnRUeXBpbmcnLCB2YWx1ZTogZnVuY3Rpb24gc3RhcnRUeXBpbmcoKVxuXG4gICAge1xuICAgICAgdGhpcy50eXBpbmcgPSB0cnVlO1xuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9IH0sIHsga2V5OiAnc3RvcFR5cGluZycsIHZhbHVlOiBmdW5jdGlvbiBzdG9wVHlwaW5nKClcblxuICAgIHtcbiAgICAgIHRoaXMudHlwaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH0gfSwgeyBrZXk6ICdzdWJtaXQnLCB2YWx1ZTogZnVuY3Rpb24gc3VibWl0KFxuXG4gICAgY29kZSkge3ZhciBfdGhpczIgPSB0aGlzO1xuICAgICAgaWYgKCF0aGlzLmlzRG9uZSgpKSB7XG4gICAgICAgIHRoaXMuc3VibWl0dGVkX2F0ID0gbmV3IERhdGUoKTtcbiAgICAgICAgbmV3IF9tb2RlbHMuU29sdXRpb24oe1xuICAgICAgICAgIHRvcGljOiB0aGlzLmdhbWUudG9waWMsXG4gICAgICAgICAgdGltZTogKHRoaXMuc3VibWl0dGVkX2F0IC0gdGhpcy5nYW1lLnN0YXJ0ZWRfYXQpIC8gMTAwMCxcbiAgICAgICAgICBjb2RlOiBjb2RlLFxuICAgICAgICAgIGF1dGhvcjogdGhpcy51c2VyIH0pLlxuICAgICAgICBmb3JjZSgpLnNhdmUoKS5cbiAgICAgICAgdGhlbihmdW5jdGlvbiAoc29sdXRpb24pIHtcbiAgICAgICAgICBfdGhpczIuc29sdXRpb24gPSBzb2x1dGlvbi50b0pTT04oeyByZXE6IHt9IH0pO1xuICAgICAgICAgIGlmIChfdGhpczIuZ2FtZS5pc0V2ZXJ5b25lRG9uZSgpKSByZXR1cm4gX3RoaXMyLmdhbWUuZmluaXNoKCk7XG4gICAgICAgICAgX3RoaXMyLnVwZGF0ZSgpO1xuICAgICAgICB9KS5cbiAgICAgICAgY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgICB9XG4gICAgfSB9LCB7IGtleTogJ2dpdmVVcCcsIHZhbHVlOiBmdW5jdGlvbiBnaXZlVXAoKVxuXG4gICAge1xuICAgICAgaWYgKCF0aGlzLmlzRG9uZSgpKSB7XG4gICAgICAgIHRoaXMuZ2l2ZW5fdXBfYXQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBpZiAodGhpcy5nYW1lLmlzRXZlcnlvbmVEb25lKCkpIHJldHVybiB0aGlzLmdhbWUuZmluaXNoKCk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB9XG4gICAgfSB9LCB7IGtleTogJ2lzRG9uZScsIHZhbHVlOiBmdW5jdGlvbiBpc0RvbmUoKVxuXG4gICAge1xuICAgICAgcmV0dXJuIHRoaXMuc3VibWl0dGVkX2F0IHx8IHRoaXMuZ2l2ZW5fdXBfYXQ7XG4gICAgfSB9LCB7IGtleTogJ3VwZGF0ZScsIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUoKVxuXG4gICAge1xuICAgICAgdGhpcy51cGRhdGVkX2F0ID0gbmV3IERhdGUoKTtcbiAgICAgIHRoaXMuZW1pdCgnUExBWUVSX1VQREFURUQnLCB0aGlzKTtcbiAgICB9IH0sIHsga2V5OiAncmF0ZScsIHZhbHVlOiBmdW5jdGlvbiByYXRlKFxuXG4gICAgc29sdXRpb25faWQsIHN0YXJzKSB7dmFyIF90aGlzMyA9IHRoaXM7XG4gICAgICBfbW9kZWxzLlNvbHV0aW9uLmdldChzb2x1dGlvbl9pZCkuXG4gICAgICB0aGVuKGZ1bmN0aW9uIChzb2x1dGlvbikge3JldHVybiBzb2x1dGlvbi5yYXRlKHN0YXJzLCBfdGhpczMudXNlcik7fSkuXG4gICAgICB0aGVuKGZ1bmN0aW9uIChzb2x1dGlvbikge1xuICAgICAgICB2YXIgcmF0ZWRQbGF5ZXIgPSBfdGhpczMuZ2FtZS5wbGF5ZXJzLmZpbmQoZnVuY3Rpb24gKHBsYXllcikge3JldHVybiBwbGF5ZXIuc29sdXRpb24gJiYgcGxheWVyLnNvbHV0aW9uLl9pZC5lcXVhbHMoc29sdXRpb25faWQpO30pO1xuICAgICAgICByYXRlZFBsYXllci5hdmVyYWdlX3N0YXJzID0gc29sdXRpb24uYXZlcmFnZV9zdGFycztcbiAgICAgICAgcmF0ZWRQbGF5ZXIucmF0aW5nc1tfdGhpczMudXNlci5mYl91c2VyX2lkXSA9IHN0YXJzO1xuICAgICAgICBfdGhpczMuZ2FtZS5wbGF5ZXJzID0gX3RoaXMzLmdhbWUucGxheWVycy5zb3J0KGZ1bmN0aW9uIChwMSwgcDIpIHtyZXR1cm4gKHAyLmF2ZXJhZ2Vfc3RhcnMgfHwgMCkgLSAocDEuYXZlcmFnZV9zdGFycyB8fCAwKTt9KTtcbiAgICAgICAgX3RoaXMzLmdhbWUudXBkYXRlKCk7XG4gICAgICB9KS5cbiAgICAgIGNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgIH0gfSwgeyBrZXk6ICd0b0pTT04nLCB2YWx1ZTogZnVuY3Rpb24gdG9KU09OKClcblxuICAgIHt2YXJcblxuICAgICAgdXNlciA9XG5cblxuXG5cblxuXG4gICAgICB0aGlzLnVzZXIsc3VibWl0dGVkX2F0ID0gdGhpcy5zdWJtaXR0ZWRfYXQsZ2l2ZW5fdXBfYXQgPSB0aGlzLmdpdmVuX3VwX2F0LHR5cGluZyA9IHRoaXMudHlwaW5nLHNvbHV0aW9uID0gdGhpcy5zb2x1dGlvbixyYXRpbmdzID0gdGhpcy5yYXRpbmdzLGF2ZXJhZ2Vfc3RhcnMgPSB0aGlzLmF2ZXJhZ2Vfc3RhcnM7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB1c2VyLFxuICAgICAgICBzdWJtaXR0ZWRfYXQ6IHN1Ym1pdHRlZF9hdCxcbiAgICAgICAgZ2l2ZW5fdXBfYXQ6IGdpdmVuX3VwX2F0LFxuICAgICAgICB0eXBpbmc6IHR5cGluZyxcbiAgICAgICAgc29sdXRpb246IHNvbHV0aW9uLFxuICAgICAgICByYXRpbmdzOiByYXRpbmdzLFxuICAgICAgICBhdmVyYWdlX3N0YXJzOiBhdmVyYWdlX3N0YXJzIH07XG5cbiAgICB9IH1dKTtyZXR1cm4gUGxheWVyO30oX0VtaXR0ZXIzLmRlZmF1bHQpO2V4cG9ydHMuZGVmYXVsdCA9XG5cblxuUGxheWVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2JhY2tlbmQvc29ja2V0L1BsYXllci5qc1xuLy8gbW9kdWxlIGlkID0gLi9zcmMvYmFja2VuZC9zb2NrZXQvUGxheWVyLmpzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/backend/socket/Player.js\n");

/***/ })

};