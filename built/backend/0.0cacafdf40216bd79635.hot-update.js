exports.id = 0;
exports.modules = {

/***/ "./src/backend/socket/Player.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("Object.defineProperty(exports, \"__esModule\", { value: true });var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();var _Emitter2 = __webpack_require__(\"./src/backend/socket/Emitter.js\");var _Emitter3 = _interopRequireDefault(_Emitter2);\nvar _models = __webpack_require__(\"./src/backend/models/index.js\");function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self, call) {if (!self) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;}var\n\nPlayer = function (_Emitter) {_inherits(Player, _Emitter);\n  function Player(io, game, author) {_classCallCheck(this, Player);var _this = _possibleConstructorReturn(this, (Player.__proto__ || Object.getPrototypeOf(Player)).call(this,\n    io, game.room));\n    _this.game = game;\n    _this.connected = 1;\n\n    _this.user = author;\n    _this.submitted_at = null;\n    _this.typing = false;\n    _this.bid = null;return _this;\n  }_createClass(Player, [{ key: 'connect', value: function connect()\n\n    {\n      this.connected++;\n      this.game.update();\n    } }, { key: 'disconnect', value: function disconnect()\n\n    {\n      if (--this.connected < 1) {\n        if (!this.game.started_at) {\n          this.game.removePlayer(this);\n        } else if (this.game.isPlaying()) {\n          this.giveUp();\n        }\n      }\n    } }, { key: 'startTyping', value: function startTyping()\n\n    {\n      this.typing = true;\n      this.update();\n    } }, { key: 'stopTyping', value: function stopTyping()\n\n    {\n      this.typing = false;\n      this.update();\n    } }, { key: 'submit', value: function submit(\n\n    amount) {var _this2 = this;\n      this.submitted_at = new Date();\n      new _models.Bid({\n        auction: this.game.auction,\n        amount: amount,\n        author: this.user }).\n      force().save().\n      then(function (bid) {\n        _this2.bid = bid.toJSON({ req: {} });\n        if (_this2.game.isEveryoneDone()) return _this2.game.finish();\n        _this2.update();\n      }).\n      catch(console.error);\n    } }, { key: 'update', value: function update()\n\n    {\n      this.updated_at = new Date();\n      this.emit('PLAYER_UPDATED', this);\n    } }, { key: 'rate', value: function rate(\n\n    bid_id, stars) {var _this3 = this;\n      _models.Bid.get(bid_id).\n      then(function (bid) {return bid.rate(stars, _this3.user);}).\n      then(function (bid) {\n        var ratedPlayer = _this3.game.players.find(function (player) {return player.bid && player.bid._id.equals(bid_id);});\n        ratedPlayer.average_stars = bid.average_stars;\n        ratedPlayer.ratings[_this3.user.username] = stars;\n        _this3.game.players = _this3.game.players.sort(function (p1, p2) {return (p2.average_stars || 0) - (p1.average_stars || 0);});\n        _this3.game.update();\n      }).\n      catch(console.error);\n    } }, { key: 'toJSON', value: function toJSON()\n\n    {var\n\n      user =\n\n\n\n\n\n\n      this.user,submitted_at = this.submitted_at,given_up_at = this.given_up_at,typing = this.typing,bid = this.bid,ratings = this.ratings,average_stars = this.average_stars;\n      return {\n        user: user,\n        submitted_at: submitted_at,\n        given_up_at: given_up_at,\n        typing: typing,\n        bid: bid,\n        ratings: ratings,\n        average_stars: average_stars };\n\n    } }]);return Player;}(_Emitter3.default);exports.default =\n\n\nPlayer;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYmFja2VuZC9zb2NrZXQvUGxheWVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JhY2tlbmQvc29ja2V0L1BsYXllci5qcz9jZGM0Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7dmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO319cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9O30oKTt2YXIgX0VtaXR0ZXIyID0gcmVxdWlyZSgnLi9FbWl0dGVyJyk7dmFyIF9FbWl0dGVyMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0VtaXR0ZXIyKTtcbnZhciBfbW9kZWxzID0gcmVxdWlyZSgnL21vZGVscycpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7cmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07fWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge3Rocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7fX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7aWYgKCFzZWxmKSB7dGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO31yZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjt9ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7aWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge3Rocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpO31zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczt9dmFyXG5cblBsYXllciA9IGZ1bmN0aW9uIChfRW1pdHRlcikge19pbmhlcml0cyhQbGF5ZXIsIF9FbWl0dGVyKTtcbiAgZnVuY3Rpb24gUGxheWVyKGlvLCBnYW1lLCBhdXRob3IpIHtfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGxheWVyKTt2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUGxheWVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUGxheWVyKSkuY2FsbCh0aGlzLFxuICAgIGlvLCBnYW1lLnJvb20pKTtcbiAgICBfdGhpcy5nYW1lID0gZ2FtZTtcbiAgICBfdGhpcy5jb25uZWN0ZWQgPSAxO1xuXG4gICAgX3RoaXMudXNlciA9IGF1dGhvcjtcbiAgICBfdGhpcy5zdWJtaXR0ZWRfYXQgPSBudWxsO1xuICAgIF90aGlzLnR5cGluZyA9IGZhbHNlO1xuICAgIF90aGlzLmJpZCA9IG51bGw7cmV0dXJuIF90aGlzO1xuICB9X2NyZWF0ZUNsYXNzKFBsYXllciwgW3sga2V5OiAnY29ubmVjdCcsIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0KClcblxuICAgIHtcbiAgICAgIHRoaXMuY29ubmVjdGVkKys7XG4gICAgICB0aGlzLmdhbWUudXBkYXRlKCk7XG4gICAgfSB9LCB7IGtleTogJ2Rpc2Nvbm5lY3QnLCB2YWx1ZTogZnVuY3Rpb24gZGlzY29ubmVjdCgpXG5cbiAgICB7XG4gICAgICBpZiAoLS10aGlzLmNvbm5lY3RlZCA8IDEpIHtcbiAgICAgICAgaWYgKCF0aGlzLmdhbWUuc3RhcnRlZF9hdCkge1xuICAgICAgICAgIHRoaXMuZ2FtZS5yZW1vdmVQbGF5ZXIodGhpcyk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5nYW1lLmlzUGxheWluZygpKSB7XG4gICAgICAgICAgdGhpcy5naXZlVXAoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gfSwgeyBrZXk6ICdzdGFydFR5cGluZycsIHZhbHVlOiBmdW5jdGlvbiBzdGFydFR5cGluZygpXG5cbiAgICB7XG4gICAgICB0aGlzLnR5cGluZyA9IHRydWU7XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH0gfSwgeyBrZXk6ICdzdG9wVHlwaW5nJywgdmFsdWU6IGZ1bmN0aW9uIHN0b3BUeXBpbmcoKVxuXG4gICAge1xuICAgICAgdGhpcy50eXBpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfSB9LCB7IGtleTogJ3N1Ym1pdCcsIHZhbHVlOiBmdW5jdGlvbiBzdWJtaXQoXG5cbiAgICBhbW91bnQpIHt2YXIgX3RoaXMyID0gdGhpcztcbiAgICAgIHRoaXMuc3VibWl0dGVkX2F0ID0gbmV3IERhdGUoKTtcbiAgICAgIG5ldyBfbW9kZWxzLkJpZCh7XG4gICAgICAgIGF1Y3Rpb246IHRoaXMuZ2FtZS5hdWN0aW9uLFxuICAgICAgICBhbW91bnQ6IGFtb3VudCxcbiAgICAgICAgYXV0aG9yOiB0aGlzLnVzZXIgfSkuXG4gICAgICBmb3JjZSgpLnNhdmUoKS5cbiAgICAgIHRoZW4oZnVuY3Rpb24gKGJpZCkge1xuICAgICAgICBfdGhpczIuYmlkID0gYmlkLnRvSlNPTih7IHJlcToge30gfSk7XG4gICAgICAgIGlmIChfdGhpczIuZ2FtZS5pc0V2ZXJ5b25lRG9uZSgpKSByZXR1cm4gX3RoaXMyLmdhbWUuZmluaXNoKCk7XG4gICAgICAgIF90aGlzMi51cGRhdGUoKTtcbiAgICAgIH0pLlxuICAgICAgY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgfSB9LCB7IGtleTogJ3VwZGF0ZScsIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUoKVxuXG4gICAge1xuICAgICAgdGhpcy51cGRhdGVkX2F0ID0gbmV3IERhdGUoKTtcbiAgICAgIHRoaXMuZW1pdCgnUExBWUVSX1VQREFURUQnLCB0aGlzKTtcbiAgICB9IH0sIHsga2V5OiAncmF0ZScsIHZhbHVlOiBmdW5jdGlvbiByYXRlKFxuXG4gICAgYmlkX2lkLCBzdGFycykge3ZhciBfdGhpczMgPSB0aGlzO1xuICAgICAgX21vZGVscy5CaWQuZ2V0KGJpZF9pZCkuXG4gICAgICB0aGVuKGZ1bmN0aW9uIChiaWQpIHtyZXR1cm4gYmlkLnJhdGUoc3RhcnMsIF90aGlzMy51c2VyKTt9KS5cbiAgICAgIHRoZW4oZnVuY3Rpb24gKGJpZCkge1xuICAgICAgICB2YXIgcmF0ZWRQbGF5ZXIgPSBfdGhpczMuZ2FtZS5wbGF5ZXJzLmZpbmQoZnVuY3Rpb24gKHBsYXllcikge3JldHVybiBwbGF5ZXIuYmlkICYmIHBsYXllci5iaWQuX2lkLmVxdWFscyhiaWRfaWQpO30pO1xuICAgICAgICByYXRlZFBsYXllci5hdmVyYWdlX3N0YXJzID0gYmlkLmF2ZXJhZ2Vfc3RhcnM7XG4gICAgICAgIHJhdGVkUGxheWVyLnJhdGluZ3NbX3RoaXMzLnVzZXIudXNlcm5hbWVdID0gc3RhcnM7XG4gICAgICAgIF90aGlzMy5nYW1lLnBsYXllcnMgPSBfdGhpczMuZ2FtZS5wbGF5ZXJzLnNvcnQoZnVuY3Rpb24gKHAxLCBwMikge3JldHVybiAocDIuYXZlcmFnZV9zdGFycyB8fCAwKSAtIChwMS5hdmVyYWdlX3N0YXJzIHx8IDApO30pO1xuICAgICAgICBfdGhpczMuZ2FtZS51cGRhdGUoKTtcbiAgICAgIH0pLlxuICAgICAgY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgfSB9LCB7IGtleTogJ3RvSlNPTicsIHZhbHVlOiBmdW5jdGlvbiB0b0pTT04oKVxuXG4gICAge3ZhclxuXG4gICAgICB1c2VyID1cblxuXG5cblxuXG5cbiAgICAgIHRoaXMudXNlcixzdWJtaXR0ZWRfYXQgPSB0aGlzLnN1Ym1pdHRlZF9hdCxnaXZlbl91cF9hdCA9IHRoaXMuZ2l2ZW5fdXBfYXQsdHlwaW5nID0gdGhpcy50eXBpbmcsYmlkID0gdGhpcy5iaWQscmF0aW5ncyA9IHRoaXMucmF0aW5ncyxhdmVyYWdlX3N0YXJzID0gdGhpcy5hdmVyYWdlX3N0YXJzO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjogdXNlcixcbiAgICAgICAgc3VibWl0dGVkX2F0OiBzdWJtaXR0ZWRfYXQsXG4gICAgICAgIGdpdmVuX3VwX2F0OiBnaXZlbl91cF9hdCxcbiAgICAgICAgdHlwaW5nOiB0eXBpbmcsXG4gICAgICAgIGJpZDogYmlkLFxuICAgICAgICByYXRpbmdzOiByYXRpbmdzLFxuICAgICAgICBhdmVyYWdlX3N0YXJzOiBhdmVyYWdlX3N0YXJzIH07XG5cbiAgICB9IH1dKTtyZXR1cm4gUGxheWVyO30oX0VtaXR0ZXIzLmRlZmF1bHQpO2V4cG9ydHMuZGVmYXVsdCA9XG5cblxuUGxheWVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2JhY2tlbmQvc29ja2V0L1BsYXllci5qc1xuLy8gbW9kdWxlIGlkID0gLi9zcmMvYmFja2VuZC9zb2NrZXQvUGxheWVyLmpzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/backend/socket/Player.js\n");

/***/ })

};